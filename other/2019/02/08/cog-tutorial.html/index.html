<!DOCTYPE html>
<html lang="en">
	<head>
		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=G-BD6G9PF6NH"></script>
		<script>
			window.dataLayer = window.dataLayer || [];
			function gtag() {
				dataLayer.push(arguments);
			}
			gtag('js', new Date());

			gtag('config', 'G-BD6G9PF6NH');
		</script>

		<meta charset="utf-8" />
		<link rel="icon" href="/favicon.ico" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="manifest" href="/manifest.json" />
		<meta name="theme-color" content="#cdffcd" />
		<!-- HTML Meta Tags -->
		<meta
			name="description"
			content="I am a software developer and meteorologist who likes mapping. I put here the things I learn on my free time."
		/>
		<!-- Google / Search Engine Tags -->
		<meta itemprop="name" content=">GeoExamples - Roger Veciana" />
		<meta
			itemprop="description"
			content="I am a software developer and meteorologist who likes mapping. I put here the things I learn on my free time."
		/>
		<meta itemprop="image" content="https://geoexamples.com/siteImage.png" />

		<title>GeoExamples - Cloud Optimized GeoTIFF tutorial</title><meta name="twitter:card" content="summary" data-svelte="svelte-w2s84v"><meta name="twitter:title" content="GeoExamples - Cloud Optimized GeoTIFF tutorial" data-svelte="svelte-w2s84v"><meta name="twitter:description" content="&lt;p&gt;Cloud Optimized G" data-svelte="svelte-w2s84v"><meta name="twitter:image" content="https://geoexamples.com/images/other/cog/twitter.png" data-svelte="svelte-w2s84v"><meta property="og:url" content="https://geoexamples.com" data-svelte="svelte-w2s84v"><meta property="og:type" content="website" data-svelte="svelte-w2s84v"><meta property="og:title" content="GeoExamples - Cloud Optimized GeoTIFF tutorial" data-svelte="svelte-w2s84v"><meta property="og:description" content="I am a software developer and meteorologist who likes mapping. I put here the things I learn on my free time." data-svelte="svelte-w2s84v"><meta property="og:image" content="https://geoexamples.com/images/other/cog/twitter.png" data-svelte="svelte-w2s84v">

		

		<link rel="modulepreload" href="/_app/start-9934143f.js">
		<link rel="modulepreload" href="/_app/chunks/vendor-f4f84e30.js">
		<link rel="modulepreload" href="/_app/pages/__layout.svelte-b5745e7e.js">
		<link rel="modulepreload" href="/_app/chunks/config-b3bde751.js">
		<link rel="modulepreload" href="/_app/pages/[category]/[year]/[month]/[date]/[slug].svelte-dcec41b3.js">
		<link rel="stylesheet" href="/_app/assets/start-a8cd1609.css">
		<link rel="stylesheet" href="/_app/assets/pages/__layout.svelte-294fb61c.css">

		<script type="module">
			import { start } from "/_app/start-9934143f.js";
			start({
				target: document.querySelector("#svelte"),
				paths: {"base":"","assets":""},
				session: {},
				host: location.host,
				route: true,
				spa: false,
				trailing_slash: "never",
				hydrate: {
					status: 200,
					error: null,
					nodes: [
						import("/_app/pages/__layout.svelte-b5745e7e.js"),
						import("/_app/pages/[category]/[year]/[month]/[date]/[slug].svelte-dcec41b3.js")
					],
					page: {
						host: location.host, // TODO this is redundant
						path: "/other/2019/02/08/cog-tutorial.html",
						query: new URLSearchParams(""),
						params: {"category":"other","year":"2019","month":"02","date":"08","slug":"cog-tutorial.html"}
					}
				}
			});
		</script>
	</head>
	<body>
		<div id="svelte">


<header class="site-header"><div class="wrapper"><a class="site-title" href="/">GeoExamples - Roger Veciana</a>

<nav class="site-nav"><div href="#" class="menu-icon"><svg viewBox="0 0 18 15"><path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"></path><path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"></path><path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"></path></svg></div>

	<div class="trigger"><a class="page-link" href="/about">About</a><a class="page-link" href="/blog">Blog</a><a class="page-link" href="/projects">Projects</a></div></nav></div></header>

<main class="page-content"><div class="wrapper">
<div class="post"><header class="post-header"><h1 class="post-title">Cloud Optimized GeoTIFF tutorial</h1>
<p class="post-meta">Feb 8, 2019</p></header>

	<article class="post-content"><!-- HTML_TAG_START --><p>Cloud Optimized GeoTIFF (COG) is simply an intelligent way to store a GeoTIFF file. Or, better defined in the <a href="https://www.cogeo.org/">COG web site</a>:</p>
<blockquote>
<p>A Cloud Optimized GeoTIFF (COG) is a regular GeoTIFF file, aimed at being hosted on a HTTP file server, with an internal organization that enables more efficient workflows on the cloud. It does this by leveraging the ability of clients issuing ​HTTP GET range requests to ask for just the parts of a file they need.</p>
</blockquote>
<p>In this short tutorial, you can find how to create them, and how to read them from a browser or the command line.</p>
<h2 id="table-of-contents">Table of Contents</h2>
<ul>
<li><a href="#the-cloud-optimized-geotiff-format">The Cloud Optimized Geotiff format</a></li>
<li><a href="#creating-a-cloud-optimized-geotiff">Creating a Cloud Optimized GeoTIFF</a><ul>
<li><a href="#create-a-cog-using-gdal-from-the-command-line">Create a COG using GDAL from the command line</a><ul>
<li><a href="#overviews">Overviews</a></li>
</ul>
</li>
<li><a href="#create-a-cog-using-gdal-python">Create a COG using gdal-python</a></li>
<li><a href="#checking-if-a-geotiff-is-a-valid-cog">Checking if a GeoTIFF is a valid COG</a></li>
</ul>
</li>
<li><a href="#reading-a-cloud-optimized-geotiff-file">Reading a Cloud Optimized GeoTIFF file</a><ul>
<li><a href="#using-geotiffjs-to-read-a-cog">Using geotiff.js to read a COG</a><ul>
<li><a href="#an-example-with-rgb">An example with RGB</a></li>
<li><a href="#an-example-with-numerical-data">An example with numerical data</a></li>
</ul>
</li>
<li><a href="#using-gdal-to-read-a-cog">Using GDAL to read a COG</a></li>
</ul>
</li>
<li><a href="#links">Links</a></li>
</ul>
<h2 id="the-cloud-optimized-geotiff-format">The Cloud Optimized Geotiff format</h2>
<p>Cloud Optimized GeoTIFFs, as explained in the previous section, are organized to be downloaded by parts. When a file os properly organized, the HTTP GET range request (&quot;bytes: start_offset-end_offset&quot; HTTP header) can be used, and only the parts needed are downloaded.</p>
<p>As Even Rouault explains in the <a href="https://trac.osgeo.org/gdal/wiki/CloudOptimizedGeoTIFF">GDAL COG page</a>, the structure is:</p>
<blockquote>
<p>TIFF / BigTIFF signature<br>IFD (​Image File Directory) of full resolution image
Values of TIFF tags that don&#39;t fit inline in the IFD directory, such as TileOffsets?, TileByteCounts? and GeoTIFF keys<br>Optional: IFD (Image File Directory) of first overview (typically subsampled by a factor of 2), followed by the values of its tags that don&#39;t fit inline<br>Optional: IFD (Image File Directory) of second overview (typically subsampled by a factor of 4), followed by the values of its tags that don&#39;t fit inline<br>...<br>Optional: IFD (Image File Directory) of last overview (typically subsampled by a factor of 2N), followed by the values of its tags that don&#39;t fit inline<br>Optional: tile content of last overview level<br>...<br>Optional: tile content of first overview level<br>Tile content of full resolution image.</p>
</blockquote>
<p>There are two important parameters to set which aren&#39;t in the standard</p>
<ul>
<li>The tile size. Usually is 256x256 or 512x512 pixels</li>
<li>The compression type. LZW is accepted more easily than DEFLATE, but the later compresses more</li>
</ul>
<h2 id="creating-a-cloud-optimized-geotiff">Creating a Cloud Optimized GeoTIFF</h2>
<p>The easiest way to create a COG is using the GDAL command line interface. If the GeoTIFF data is created from a script using GDAL, it is also possible to do it inside using python or any language with the GDAL bindings.</p>
<p>But, before trying to convert anything, better check if the file is already in a good format and if you prefer using overviews or not.</p>
<h3 id="create-a-cog-using-gdal-from-the-command-line">Create a COG using GDAL from the command line</h3>
<p>The basic thing to understand is that the GeoTIFF must be <em>tiled</em>. This is, that instead of writing all the row, the image is divided in small tiles, so only some of them are downloaded. Compression can be <em>DEFLATE</em> or <em>LZW</em>. The first compresses more but is less compatible with some libraries.</p>
$ gdal_translate ori.tiff out.tiff -co COMPRESS=LZW -co TILED=YES<p>This is ok if you want to download all the bands at once, like in an aerial photo. If you have independent bands, or many of them, you may want to download only one band at once. The, you may use the <em>INTERLEAVE=BAND</em> option:</p>
$ gdal_translate ori.tiff out.tiff -co COMPRESS=LZW -co TILED=YES -co INTERLEAVE=BAND<h4 id="overviews">Overviews</h4>
<p>The TIFF format <a href="https://gis.stackexchange.com/a/255847/6503">allows to store more than one image</a>, the same way a PDF can store more than one page. This can be used to create the <em>overviews</em> or <em>pyramids</em>. Each overview will divide the image in four from the previous level, so a smaller amount of data can be read. In our case, a thumbnail of a huge GeoTIFF could be easily shown without reading all the pixels.</p>
<p>This is independent of the tiling part, but combining both allows to make efficient files for reading a small part of the image and for zooming out efficiently at the same time.</p>
<p>GDAL has a <a href="https://www.gdal.org/gdaladdo.html">cli command to create the pyramids called gdaladdo</a>. The command must be run <em>BEFORE</em> the <em>gdal_translate</em> or the resulting GeoTIFF won&#39;t be COG compliant.</p>
<p>This would make four overview images by averaging the values:</p>
$ gdaladdo -r average abc.tif 2 4 8 16<h3 id="create-a-cog-using-gdal-python">Create a COG using gdal-python</h3>
<p>The previous section results can be achieved using python directly, which is nice to integrate in the scripts that generate data.</p>
<p><pre><code>
<span class="token keyword">import</span> gdal
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

x_size <span class="token operator">=</span> <span class="token number">10000</span>
y_size <span class="token operator">=</span> <span class="token number">10000</span>
num_bands <span class="token operator">=</span> <span class="token number">4</span>
file_name <span class="token operator">=</span> <span class="token string">"/tmp/test.tiff"</span>

data <span class="token operator">=</span> np<span class="token punctuation">.</span><span class="token function">ones</span><span class="token punctuation">(</span><span class="token punctuation">(</span>num_bands<span class="token punctuation">,</span> y_size<span class="token punctuation">,</span> x_size<span class="token punctuation">)</span><span class="token punctuation">)</span>
driver <span class="token operator">=</span> gdal<span class="token punctuation">.</span><span class="token function">GetDriverByName</span><span class="token punctuation">(</span><span class="token string">'GTiff'</span><span class="token punctuation">)</span>
data_set <span class="token operator">=</span> driver<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span>file_name<span class="token punctuation">,</span> x_size<span class="token punctuation">,</span> y_size<span class="token punctuation">,</span> num_bands<span class="token punctuation">,</span>
gdal<span class="token punctuation">.</span>GDT_Float32<span class="token punctuation">,</span>
options<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">"TILED=YES"</span><span class="token punctuation">,</span>
<span class="token string">"COMPRESS=LZW"</span><span class="token punctuation">,</span>
<span class="token string">"INTERLEAVE=BAND"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token function">range</span><span class="token punctuation">(</span>num_bands<span class="token punctuation">)</span><span class="token operator">:</span>
data_set<span class="token punctuation">.</span><span class="token function">GetRasterBand</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">WriteArray</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>

data_set<span class="token punctuation">.</span><span class="token function">BuildOverviews</span><span class="token punctuation">(</span><span class="token string">"NEAREST"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
data_set <span class="token operator">=</span> None

</code></pre></p>
<ul>
<li>As you can see, the creation options are passed as a parameter when creating the data set</li>
<li>Also, the gdal-python bindings have a nice method to create the overviews. The problem is that this will give an error in the COG format, because the pyramids were created after the tiling. It&#39;s not a big error, as we will see in the next section, but you can avoid it by using a <em>memory driver file</em> before creating the actual one:</li>
</ul>
<p><pre><code>
<span class="token keyword">import</span> gdal
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

x_size <span class="token operator">=</span> <span class="token number">10000</span>
y_size <span class="token operator">=</span> <span class="token number">10000</span>
num_bands <span class="token operator">=</span> <span class="token number">4</span>
file_name <span class="token operator">=</span> <span class="token string">"/tmp/test.tiff"</span>

data <span class="token operator">=</span> np<span class="token punctuation">.</span><span class="token function">ones</span><span class="token punctuation">(</span><span class="token punctuation">(</span>num_bands<span class="token punctuation">,</span> y_size<span class="token punctuation">,</span> x_size<span class="token punctuation">)</span><span class="token punctuation">)</span>
driver <span class="token operator">=</span> gdal<span class="token punctuation">.</span><span class="token function">GetDriverByName</span><span class="token punctuation">(</span><span class="token string">'MEM'</span><span class="token punctuation">)</span>
data_set <span class="token operator">=</span> driver<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span> x_size<span class="token punctuation">,</span> y_size<span class="token punctuation">,</span> num_bands<span class="token punctuation">,</span>
gdal<span class="token punctuation">.</span>GDT_Float32<span class="token punctuation">)</span>

<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token function">range</span><span class="token punctuation">(</span>num_bands<span class="token punctuation">)</span><span class="token operator">:</span>
data_set<span class="token punctuation">.</span><span class="token function">GetRasterBand</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">WriteArray</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>

data <span class="token operator">=</span> None
data_set<span class="token punctuation">.</span><span class="token function">BuildOverviews</span><span class="token punctuation">(</span><span class="token string">"NEAREST"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

driver <span class="token operator">=</span> gdal<span class="token punctuation">.</span><span class="token function">GetDriverByName</span><span class="token punctuation">(</span><span class="token string">'GTiff'</span><span class="token punctuation">)</span>
data_set2 <span class="token operator">=</span> driver<span class="token punctuation">.</span><span class="token function">CreateCopy</span><span class="token punctuation">(</span>file_name<span class="token punctuation">,</span> data_set<span class="token punctuation">,</span>
options<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">"COPY_SRC_OVERVIEWS=YES"</span><span class="token punctuation">,</span>
<span class="token string">"TILED=YES"</span><span class="token punctuation">,</span>
<span class="token string">"COMPRESS=LZW"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
data_set <span class="token operator">=</span> None
data_set2 <span class="token operator">=</span> None

</code></pre></p>
<h3 id="checking-if-a-geotiff-is-a-valid-cog">Checking if a GeoTIFF is a valid COG</h3>
<p>Even Rouault made a <a href="https://raw.githubusercontent.com/OSGeo/gdal/master/gdal/swig/python/samples/validate_cloud_optimized_geotiff.py">nice python script</a> that not only checks if the file is a correct COG, but also gives some tips to improve the ones that are correct.</p>
<p>For instance, the file in the <a href="https://beta.observablehq.com/@tmcw/cloud-optimized-geotiffs">ObservableHQ example</a> works, but it&#39;s a not valid COG, because of a problem with the overviews. The script output is:</p>
<p><pre><code>

$ python3 validate_cloud_optimized_geotiff<span class="token punctuation">.</span>py SkySat_Freeport_s03_20170831T162740Z3<span class="token punctuation">.</span>tif

SkySat_Freeport_s03_20170831T162740Z3<span class="token punctuation">.</span>tif is <span class="token constant">NOT</span> a valid cloud optimized GeoTIFF<span class="token punctuation">.</span>
The following errors were found<span class="token operator">:</span>
<span class="token operator">&lt;</span>ul<span class="token operator">></span>
<span class="token operator">&lt;</span>li<span class="token operator">></span>The offset <span class="token keyword">of</span> the first block <span class="token keyword">of</span> overview <span class="token keyword">of</span> index <span class="token number">3</span> should be after the one <span class="token keyword">of</span> the overview <span class="token keyword">of</span> index <span class="token number">4</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
<span class="token operator">&lt;</span>li<span class="token operator">></span>The offset <span class="token keyword">of</span> the first block <span class="token keyword">of</span> overview <span class="token keyword">of</span> index <span class="token number">2</span> should be after the one <span class="token keyword">of</span> the overview <span class="token keyword">of</span> index <span class="token number">3</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
<span class="token operator">&lt;</span>li<span class="token operator">></span>The offset <span class="token keyword">of</span> the first block <span class="token keyword">of</span> overview <span class="token keyword">of</span> index <span class="token number">1</span> should be after the one <span class="token keyword">of</span> the overview <span class="token keyword">of</span> index <span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
<span class="token operator">&lt;</span>li<span class="token operator">></span>The offset <span class="token keyword">of</span> the first block <span class="token keyword">of</span> overview <span class="token keyword">of</span> index <span class="token number">0</span> should be after the one <span class="token keyword">of</span> the overview <span class="token keyword">of</span> index <span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
<span class="token operator">&lt;</span>li<span class="token operator">></span>The offset <span class="token keyword">of</span> the first block <span class="token keyword">of</span> the main resolution image should be after the one <span class="token keyword">of</span> the overview <span class="token keyword">of</span> index <span class="token number">4</span>
</code></pre></li>
</ul>
<p>We can easily correct it by running:</p>
gdal_translate SkySat_Freeport_s03_20170831T162740Z3.tif correct_SkySat_Freeport.tiff -co COMPRESS=LZW -co TILED=YES<p>Now, the output gives a warning, instead of an error:</p>
<p><pre><code>
$ python3 validate_cloud_optimized_geotiff<span class="token punctuation">.</span>py correct_SkySat_Freeport<span class="token punctuation">.</span>tif

The following warnings were found<span class="token operator">:</span>
<span class="token operator">&lt;</span>ul<span class="token operator">></span>
<span class="token operator">&lt;</span>li<span class="token operator">></span>The file is greater than <span class="token number">512</span>xH or Wx512<span class="token punctuation">,</span> it is recommended to include internal overviews
</code></pre></li>
</ul>
<p>So the previous part removed the internal overviews. That&#39;s because we didn&#39;t use the <em>-co COPY_SRC_OVERVIEWS=YES</em> option:</p>
gdal_translate SkySat_Freeport_s03_20170831T162740Z3.tif correct_SkySat_Freeport.tiff -co COPY_SRC_OVERVIEWS=YES -co COMPRESS=LZW -co TILED=YES<p>It&#39;s important to create the overviews <em>before</em> transforming the file into a GeoTIFF, or otherwise the order will be wrong and the test won&#39;t pass. It will probably work anyway, but it&#39;s better to go with the specification. There&#39;s <a href="http://erouault.blogspot.com/2017/10/gdal-and-cloud-storage.html">a post by Even Rouault</a> with a discussion about this error.</p>
<h2 id="reading-a-cloud-optimized-geotiff-file">Reading a Cloud Optimized GeoTIFF file</h2>
<p>COG can be used to store a huge multi-layer file in the cloud so your scripts can use parts of it, or you can download the part you need to create an interactive map, or use <a href="https://terracotta-python.readthedocs.io/en/latest/tutorials/aws.html">Terracotta</a> to create the tiles directly at AWS uploading only the whole GaoTIFF.</p>
<h3 id="using-geotiffjs-to-read-a-cog">Using geotiff.js to read a COG</h3>
<p>The awesome geotiff.js has been adapted to read COG files, which make really easy to use them without thinking about the format.</p>
<p>I learnt how to work with COG and geotiff.js looking at <a href="https://beta.observablehq.com/@tmcw/cloud-optimized-geotiffs">this ObservableHQ example</a>. I&#39;ll try to expand a little the important points.</p>
<p>The first point to understand is that geotiff-js has now many asynchronous methods, because it has to open the file, but also read the different parts of it. Let&#39;s see a small example that just reads a square of 10x10 pixels.</p>
<p><pre><code>
<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">const</span> tiff <span class="token operator">=</span> <span class="token keyword">await</span> GeoTIFF<span class="token punctuation">.</span><span class="token function">fromUrl</span><span class="token punctuation">(</span><span class="token string">"out.tiff"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Number of images (pyramids):"</span><span class="token punctuation">,</span> <span class="token keyword">await</span> tiff<span class="token punctuation">.</span><span class="token function">getImageCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> image <span class="token operator">=</span> <span class="token keyword">await</span> tiff<span class="token punctuation">.</span><span class="token function">getImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Bounding box:"</span><span class="token punctuation">,</span> image<span class="token punctuation">.</span><span class="token function">getBoundingBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Width:"</span><span class="token punctuation">,</span> image<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token keyword">await</span> image<span class="token punctuation">.</span><span class="token function">readRasters</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
window<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">210</span><span class="token punctuation">,</span> <span class="token number">210</span><span class="token punctuation">]</span><span class="token punctuation">,</span> samples<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Values:"</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></p>
<p>The output is:</p>
<img src="/images/other/cog/console_gtiffjs.png"/>

<ul>
<li>I used the async/await technique to make the code easier to understand. In this case, opening the image, getting the actual image and reading the image data are three asynchronous methods.</li>
<li><em>getImage()</em> will return the main pyramid, with the original resolution. Is the same as <em>.getImage(0)</em>. In the example, another pyramid is created, so using <em>.getImage(1)</em>, an image with a 500px width would returned</li>
<li>The <em>image</em> object has all the pyramid properties, but not the actual data, which has to be retrieved using the <em>readRasters</em> method<ul>
<li>The <em>readRasters</em> method has several options. In this case, the <em>window</em> argument asks to get only some of the pixels, taking advantage of being a COG</li>
<li>The <em>samples</em> parameter is the band number. The example file had two separate bands, so using <em>samples: [1]</em> would return the second band. All the desired bands can be passed into this parameter, so the result of <em>samples: [0, 1]</em> would be an array with two <em>Float32Array</em> elements, one for each band</li>
</ul>
</li>
</ul>
<p>What about the queries? This is the <em>network</em> tab on the developer tools:</p>
<img src="/images/other/cog/network_gtiffjs.png"/>

<p>We can see three downloads of the <em>out.tiff</em> file:</p>
<ul>
<li>The first one is the header for the main image.</li>
<li>The second the header for the first pyramid. If the image had no pyramids, this wouldn&#39;t appear.</li>
<li>The third is the data (note the different size).<ul>
<li>If two different bands are to be retrieved, an extra request will appear. This is because I separated the tiff in separate bands, since they are data bands. If the file is a satellite with the rgb bands, keeping the three bands together would be more efficient.</li>
</ul>
</li>
</ul>
<p>Note that all the above has been transparent, which is really cool.</p>
<h4 id="an-example-with-rgb">An example with RGB</h4>
<p>There&#39;s <a href="https://beta.observablehq.com/@tmcw/cloud-optimized-geotiffs">a nice example at ObservableHQ</a> showing how to use an RGB GeoTIFF when it&#39;s cloud optimized.</p>
<img src="/images/other/cog/rgb.png"/>

<p>The <em>interesting</em> part is this one:</p>
<p><pre><code>
<span class="token function-variable function">readImageData</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">image<span class="token punctuation">,</span> options <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
<span class="token keyword">const</span> rasters <span class="token operator">=</span> <span class="token keyword">await</span> image<span class="token punctuation">.</span><span class="token function">readRasters</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token punctuation">[</span>r<span class="token punctuation">,</span> g<span class="token punctuation">,</span> b<span class="token punctuation">]</span> <span class="token operator">=</span> rasters<span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token punctuation">{</span> width<span class="token punctuation">,</span> height <span class="token punctuation">}</span> <span class="token operator">=</span> rasters<span class="token punctuation">;</span>
<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8ClampedArray</span><span class="token punctuation">(</span>width _ height _ <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> r<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
data<span class="token punctuation">[</span>i <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> r<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
data<span class="token punctuation">[</span>i <span class="token operator">*</span> <span class="token number">4</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> g<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
data<span class="token punctuation">[</span>i <span class="token operator">*</span> <span class="token number">4</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> b<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
data<span class="token punctuation">[</span>i <span class="token operator">*</span> <span class="token number">4</span> <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> r<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> <span class="token number">255</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ImageData</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></p>
<ul>
<li>The r,g and b channels are separated in layers, but to draw the image, we want it in a Uint8ClampedArray</li>
<li><em>context.putImageData(data, 0, 0);</em> is then the way to draw the data directly. Quite easy!</li>
</ul>
<h4 id="an-example-with-numerical-data">An example with numerical data</h4>
<p>In this case, the data in the GeoTIFF is a matrix with the numerical values (temperature in our case). The <em>sample.tiff</em> file is big, 26MB, so making the client to download all the data is not an option.</p>
<p>I&#39;m using the marching squares algorithm to show the regions where the data is between two thresholds. You can see <a href="https://geoexamples.com/d3-raster-tools-docs/plot/isobands.html">a tutorial here</a>.</p>
<p><a href="https://bl.ocks.org/rveciana/9d9ef3282959a41c3e54cedb717bdddf">Click here to see the working example</a>]
<pre><code>

<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">const</span> tiff <span class="token operator">=</span> <span class="token keyword">await</span> GeoTIFF<span class="token punctuation">.</span><span class="token function">fromUrl</span><span class="token punctuation">(</span><span class="token string">"sample.tiff"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> image <span class="token operator">=</span> <span class="token keyword">await</span> tiff<span class="token punctuation">.</span><span class="token function">getImage</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> rasterData <span class="token operator">=</span> <span class="token keyword">await</span> image<span class="token punctuation">.</span><span class="token function">readRasters</span><span class="token punctuation">(</span><span class="token punctuation">{</span>samples<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
rasterData <span class="token operator">=</span> rasterData<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>image<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">&lt;</span>image<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    data<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>image<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>image<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      data<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> rasterData<span class="token punctuation">[</span>i <span class="token operator">+</span> j<span class="token operator">*</span>image<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token keyword">let</span> intervals <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> bands <span class="token operator">=</span> rastertools<span class="token punctuation">.</span><span class="token function">isobands</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> intervals<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> colorScale <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">scaleSequential</span><span class="token punctuation">(</span>d3<span class="token punctuation">.</span>interpolateBuPu<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> canvas <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">"body"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"canvas"</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"width"</span><span class="token punctuation">,</span> <span class="token number">680</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"height"</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> context <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> path <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">geoPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
             <span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>

bands<span class="token punctuation">.</span>features<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  context<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span>globalAlpha <span class="token operator">=</span> <span class="token number">0.7</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token function">colorScale</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">+</span> intervals<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">path</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></p>
<p>The output will be like this (all the GeoTIFF coverage):</p>
<img src="/images/other/cog/js_example1.png"/>

<ul>
<li>In this case, only the smallest overlay is used. Why? Because it&#39;s got about 350x350 pixels. This is enough to create the isobands. So, in case you don&#39;t know which overlay to take, this is a good orientation<ul>
<li><em>tiff.getImage(3)</em> is the place where the overlay is chosen</li>
</ul>
</li>
<li>The color scale and path drawing are using the usual d3js library tools. This is just an example and everything could be done with other tools, although d3js is still the best option</li>
</ul>
<p>Let&#39;s see another example using the image with the highest resolution, but downloading just a small part using the GeoTIFF capabilities.</p>
<p><a href="https://bl.ocks.org/rveciana/5b844350ad418787d3ee402cc566fff9">Click here to see the working example</a>]</p>
<p><pre><code>
<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">let</span> origin <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">700</span><span class="token punctuation">,</span> <span class="token number">600</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> size <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">450</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> tiff <span class="token operator">=</span> <span class="token keyword">await</span> GeoTIFF<span class="token punctuation">.</span><span class="token function">fromUrl</span><span class="token punctuation">(</span><span class="token string">"/rveciana/raw/9d9ef3282959a41c3e54cedb717bdddf/sample.tiff"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> image <span class="token operator">=</span> <span class="token keyword">await</span> tiff<span class="token punctuation">.</span><span class="token function">getImage</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> rasterData <span class="token operator">=</span> <span class="token keyword">await</span> image<span class="token punctuation">.</span><span class="token function">readRasters</span><span class="token punctuation">(</span><span class="token punctuation">{</span>window<span class="token operator">:</span> <span class="token punctuation">[</span>origin<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> origin<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
origin<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> size<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> origin<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
samples<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
rasterData <span class="token operator">=</span> rasterData<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">&lt;</span>size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    data<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>size<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>size<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      data<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> rasterData<span class="token punctuation">[</span>i <span class="token operator">+</span> j<span class="token operator">*</span>size<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> intervals <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> bands <span class="token operator">=</span> rastertools<span class="token punctuation">.</span><span class="token function">isobands</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> intervals<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> colorScale <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">scaleSequential</span><span class="token punctuation">(</span>d3<span class="token punctuation">.</span>interpolateBuPu<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> canvas <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">"body"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"canvas"</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"width"</span><span class="token punctuation">,</span> <span class="token number">680</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"height"</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> context <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> path <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">geoPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
             <span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>

bands<span class="token punctuation">.</span>features<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  context<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span>globalAlpha <span class="token operator">=</span> <span class="token number">0.7</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token function">colorScale</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">+</span> intervals<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">path</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></p>
<p>The output will be like this (a zoomed portion of the previous example):</p>
<img src="/images/other/cog/js_example2.png"/>

<ul>
<li><em>tiff.getImage(0)</em> will get the main image, not an overview. Using <em>tiff.getImage()</em> would give the same result</li>
<li>Note that <em>image.getHeight()</em> and <em>image.getWidth()</em> have been changed by the width and height we want to show. That&#39;s, of course, because we want to get just a part of the image</li>
<li>Now, the <em>window</em> parameter is used in <em>image.readRasters</em>, to select the portion we want to have. We set an offset (upper left pixel) and the size of the data we want</li>
<li>This case is a little slow because it has many pixels and generating the isobands takes a bit. An alternative could be using an overview or drawing the pixels directly, since they are small enough</li>
</ul>
<h3 id="using-gdal-to-read-a-cog">Using GDAL to read a COG</h3>
<p>A COG can be read from the command line too! <a href="https://trac.osgeo.org/gdal/wiki/CloudOptimizedGeoTIFF">This page</a> explains how. It&#39;s possible, for instance, to get a pixel value by using <a href="https://www.gdal.org/gdallocationinfo.html">gdallocationinfo</a>:</p>
gdallocationinfo --debug on /vsicurl/http://even.rouault.free.fr/gtiff_test/S2A_MSIL1C_20170102T111442_N0204_R137_T30TXT_20170102T111441_TCI_cloudoptimized_512.tif  5000 5000<p>This will check the position 5000, 5000 on the defined file, which is located on a remote server. And will use the COG capabilities.</p>
<p>On the <a href="https://trac.osgeo.org/gdal/wiki/CloudOptimizedGeoTIFF">explanation page</a>, it&#39;s discussed that using overviews can be faster.</p>
<p>To read a part of the array and store it into a tiff file, use gdal_translate:</p>
gdal_translate --debug on \
/vsicurl/http://even.rouault.free.fr/gtiff_test/S2A_MSIL1C_20170102T111442_N0204_R137_T30TXT_20170102T111441_TCI_cloudoptimized_512.tif \
-srcwin 1024 1024 256 256 out.tif<p>Again, this is discussed in the <a href="https://trac.osgeo.org/gdal/wiki/CloudOptimizedGeoTIFF">explanation page</a>, comparing which type of file (with/without tiles or overviews) works better.</p>
<h2 id="links">Links</h2>
<ul>
<li><a href="https://www.cogeo.org/">The COG web site</a></li>
<li><a href="https://trac.osgeo.org/gdal/wiki/CloudOptimizedGeoTIFF">The GDAL Cloud Optimized Geotiff web page</a></li>
<li><a href="https://www.gdal.org/frmt_gtiff.html">The GDAL GeoTIFF format manual page</a></li>
<li><a href="https://www.gdal.org/gdaladdo.html">The gdaladdo manual page</a></li>
<li><a href="https://gis.stackexchange.com/a/255847/6503">A StackOverflow answer tot he overviews format</a></li>
<li><a href="https://raw.githubusercontent.com/OSGeo/gdal/master/gdal/swig/python/samples/validate_cloud_optimized_geotiff.py">Cloud Optimized GeoTIFF validator</a></li>
<li><a href="http://erouault.blogspot.com/2017/10/gdal-and-cloud-storage.html">Blog post explaining the overviews problem</a></li>
<li><a href="https://terracotta-python.readthedocs.io/en/latest/tutorials/aws.html">Terracotta</a></li>
<li><a href="https://geotiffjs.github.io/">The geotiff.js site</a></li>
<li><a href="https://beta.observablehq.com/@tmcw/cloud-optimized-geotiffs">An ObservableHQ interactive example</a></li>
<li><a href="https://bl.ocks.org/rveciana/9d9ef3282959a41c3e54cedb717bdddf">First JavaScript example with data: Overviews</a></li>
<li><a href="https://bl.ocks.org/rveciana/5b844350ad418787d3ee402cc566fff9">Second JavaScript example with data: Region</a></li>
<li><a href="https://geoexamples.com/d3-raster-tools-docs/plot/isobands.html">Isobands tutorial</a></li>
</ul>
<!-- HTML_TAG_END --></article></div></div></main>
<footer class="site-footer"><div class="wrapper"><div class="footer-col-wrapper"><div class="footer-col  footer-col-1"><ul class="contact-list"><li>GeoExamples - Roger Veciana</li></ul></div>

	<div class="footer-col  footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/rveciana"><span class="icon  icon--github"><svg viewBox="0 0 16 16"><path fill="#89b889" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"></path></svg></span>

						<span class="username">rveciana</span></a></li>

			<li><a href="https://twitter.com/rveciana"><span class="icon  icon--twitter"><svg viewBox="0 0 16 16"><path fill="#89b889" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809
                    c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"></path></svg></span>

						<span class="username">rveciana</span></a></li>
			<li><a href="https://www.linkedin.com/in/rogerveciana"><span class="icon  icon--twitter"><svg width="16" height="15.28958"><path d="M 0,1.77606 Q 0,1.00386 0.54054,0.50193 1.08108,0 1.94595,0 2.79537,0 3.32047,0.49421 3.86101,1.00386 3.86101,1.8224 q 0,0.74131 -0.5251,1.23552 -0.54054,0.50965 -1.42085,0.50965 l -0.0154,0 q -0.84942,0 -1.37452,-0.50965 Q 4e-5,2.54827 4e-5,1.77606 Z m 0.20078,13.51352 0,-10.3166 3.42857,0 0,10.3166 -3.42857,0 z m 5.32818,0 3.42857,0 0,-5.76062 q 0,-0.54054 0.12355,-0.83398 0.21622,-0.52509 0.65638,-0.88803 0.44015,-0.36293 1.10424,-0.36293 1.72973,0 1.72973,2.33205 l 0,5.51351 3.42857,0 0,-5.91506 Q 16,7.08881 14.91892,5.90734 13.83784,4.72587 12.06178,4.72587 q -1.99228,0 -3.10425,1.71429 l 0,0.0309 -0.0154,0 0.0154,-0.0309 0,-1.46718 -3.42857,0 q 0.0309,0.49421 0.0309,3.07336 0,2.57915 -0.0309,7.24324 z"></path></svg></span>

						<span class="username">rogerveciana</span></a></li></ul></div>

	<div class="footer-col  footer-col-3"><p class="text">I am a software developer and meteorologist who likes mapping. I put here the things I learn on my free time.</p>
		<p class="text">Roger Veciana i Rovira</p></div></div></div></footer>



	<script type="application/json" data-type="svelte-data" data-url="/summary_pages.json">{"status":200,"statusText":"","headers":{"content-type":"application/json; charset=utf-8"},"body":"[{\"title\":\"About\",\"permalink\":\"\u002Fabout\",\"excerpt\":\"\u003Cp\u003E{{ site.author.name }}\u003C\u002Fp\u003E\"},{\"title\":\"Projects\",\"permalink\":\"\u002Fprojects\",\"excerpt\":\"\u003Cp\u003ESome of my personal projects:\u003C\u002Fp\u003E\"},{\"title\":\"CV\",\"permalink\":\"\u002Fcv\",\"excerpt\":\"\u003Ch2 id=\\\"jobs\\\"\u003EJobs\u003C\u002Fh2\u003E\",\"avoidMainMenu\":true}]"}</script>

	<script type="application/json" data-type="svelte-data" data-url="cog-tutorial.html.json">{"status":200,"statusText":"","headers":{"content-type":"application/json; charset=utf-8"},"body":"{\"title\":\"Cloud Optimized GeoTIFF tutorial\",\"contents\":\"\u003Cp\u003ECloud Optimized GeoTIFF (COG) is simply an intelligent way to store a GeoTIFF file. Or, better defined in the \u003Ca href=\\\"https:\u002F\u002Fwww.cogeo.org\u002F\\\"\u003ECOG web site\u003C\u002Fa\u003E:\u003C\u002Fp\u003E\\n\u003Cblockquote\u003E\\n\u003Cp\u003EA Cloud Optimized GeoTIFF (COG) is a regular GeoTIFF file, aimed at being hosted on a HTTP file server, with an internal organization that enables more efficient workflows on the cloud. It does this by leveraging the ability of clients issuing ​HTTP GET range requests to ask for just the parts of a file they need.\u003C\u002Fp\u003E\\n\u003C\u002Fblockquote\u003E\\n\u003Cp\u003EIn this short tutorial, you can find how to create them, and how to read them from a browser or the command line.\u003C\u002Fp\u003E\\n\u003Ch2 id=\\\"table-of-contents\\\"\u003ETable of Contents\u003C\u002Fh2\u003E\\n\u003Cul\u003E\\n\u003Cli\u003E\u003Ca href=\\\"#the-cloud-optimized-geotiff-format\\\"\u003EThe Cloud Optimized Geotiff format\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"#creating-a-cloud-optimized-geotiff\\\"\u003ECreating a Cloud Optimized GeoTIFF\u003C\u002Fa\u003E\u003Cul\u003E\\n\u003Cli\u003E\u003Ca href=\\\"#create-a-cog-using-gdal-from-the-command-line\\\"\u003ECreate a COG using GDAL from the command line\u003C\u002Fa\u003E\u003Cul\u003E\\n\u003Cli\u003E\u003Ca href=\\\"#overviews\\\"\u003EOverviews\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"#create-a-cog-using-gdal-python\\\"\u003ECreate a COG using gdal-python\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"#checking-if-a-geotiff-is-a-valid-cog\\\"\u003EChecking if a GeoTIFF is a valid COG\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"#reading-a-cloud-optimized-geotiff-file\\\"\u003EReading a Cloud Optimized GeoTIFF file\u003C\u002Fa\u003E\u003Cul\u003E\\n\u003Cli\u003E\u003Ca href=\\\"#using-geotiffjs-to-read-a-cog\\\"\u003EUsing geotiff.js to read a COG\u003C\u002Fa\u003E\u003Cul\u003E\\n\u003Cli\u003E\u003Ca href=\\\"#an-example-with-rgb\\\"\u003EAn example with RGB\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"#an-example-with-numerical-data\\\"\u003EAn example with numerical data\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"#using-gdal-to-read-a-cog\\\"\u003EUsing GDAL to read a COG\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"#links\\\"\u003ELinks\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003Ch2 id=\\\"the-cloud-optimized-geotiff-format\\\"\u003EThe Cloud Optimized Geotiff format\u003C\u002Fh2\u003E\\n\u003Cp\u003ECloud Optimized GeoTIFFs, as explained in the previous section, are organized to be downloaded by parts. When a file os properly organized, the HTTP GET range request (&quot;bytes: start_offset-end_offset&quot; HTTP header) can be used, and only the parts needed are downloaded.\u003C\u002Fp\u003E\\n\u003Cp\u003EAs Even Rouault explains in the \u003Ca href=\\\"https:\u002F\u002Ftrac.osgeo.org\u002Fgdal\u002Fwiki\u002FCloudOptimizedGeoTIFF\\\"\u003EGDAL COG page\u003C\u002Fa\u003E, the structure is:\u003C\u002Fp\u003E\\n\u003Cblockquote\u003E\\n\u003Cp\u003ETIFF \u002F BigTIFF signature\u003Cbr\u003EIFD (​Image File Directory) of full resolution image\\nValues of TIFF tags that don&#39;t fit inline in the IFD directory, such as TileOffsets?, TileByteCounts? and GeoTIFF keys\u003Cbr\u003EOptional: IFD (Image File Directory) of first overview (typically subsampled by a factor of 2), followed by the values of its tags that don&#39;t fit inline\u003Cbr\u003EOptional: IFD (Image File Directory) of second overview (typically subsampled by a factor of 4), followed by the values of its tags that don&#39;t fit inline\u003Cbr\u003E...\u003Cbr\u003EOptional: IFD (Image File Directory) of last overview (typically subsampled by a factor of 2N), followed by the values of its tags that don&#39;t fit inline\u003Cbr\u003EOptional: tile content of last overview level\u003Cbr\u003E...\u003Cbr\u003EOptional: tile content of first overview level\u003Cbr\u003ETile content of full resolution image.\u003C\u002Fp\u003E\\n\u003C\u002Fblockquote\u003E\\n\u003Cp\u003EThere are two important parameters to set which aren&#39;t in the standard\u003C\u002Fp\u003E\\n\u003Cul\u003E\\n\u003Cli\u003EThe tile size. Usually is 256x256 or 512x512 pixels\u003C\u002Fli\u003E\\n\u003Cli\u003EThe compression type. LZW is accepted more easily than DEFLATE, but the later compresses more\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003Ch2 id=\\\"creating-a-cloud-optimized-geotiff\\\"\u003ECreating a Cloud Optimized GeoTIFF\u003C\u002Fh2\u003E\\n\u003Cp\u003EThe easiest way to create a COG is using the GDAL command line interface. If the GeoTIFF data is created from a script using GDAL, it is also possible to do it inside using python or any language with the GDAL bindings.\u003C\u002Fp\u003E\\n\u003Cp\u003EBut, before trying to convert anything, better check if the file is already in a good format and if you prefer using overviews or not.\u003C\u002Fp\u003E\\n\u003Ch3 id=\\\"create-a-cog-using-gdal-from-the-command-line\\\"\u003ECreate a COG using GDAL from the command line\u003C\u002Fh3\u003E\\n\u003Cp\u003EThe basic thing to understand is that the GeoTIFF must be \u003Cem\u003Etiled\u003C\u002Fem\u003E. This is, that instead of writing all the row, the image is divided in small tiles, so only some of them are downloaded. Compression can be \u003Cem\u003EDEFLATE\u003C\u002Fem\u003E or \u003Cem\u003ELZW\u003C\u002Fem\u003E. The first compresses more but is less compatible with some libraries.\u003C\u002Fp\u003E\\n$ gdal_translate ori.tiff out.tiff -co COMPRESS=LZW -co TILED=YES\u003Cp\u003EThis is ok if you want to download all the bands at once, like in an aerial photo. If you have independent bands, or many of them, you may want to download only one band at once. The, you may use the \u003Cem\u003EINTERLEAVE=BAND\u003C\u002Fem\u003E option:\u003C\u002Fp\u003E\\n$ gdal_translate ori.tiff out.tiff -co COMPRESS=LZW -co TILED=YES -co INTERLEAVE=BAND\u003Ch4 id=\\\"overviews\\\"\u003EOverviews\u003C\u002Fh4\u003E\\n\u003Cp\u003EThe TIFF format \u003Ca href=\\\"https:\u002F\u002Fgis.stackexchange.com\u002Fa\u002F255847\u002F6503\\\"\u003Eallows to store more than one image\u003C\u002Fa\u003E, the same way a PDF can store more than one page. This can be used to create the \u003Cem\u003Eoverviews\u003C\u002Fem\u003E or \u003Cem\u003Epyramids\u003C\u002Fem\u003E. Each overview will divide the image in four from the previous level, so a smaller amount of data can be read. In our case, a thumbnail of a huge GeoTIFF could be easily shown without reading all the pixels.\u003C\u002Fp\u003E\\n\u003Cp\u003EThis is independent of the tiling part, but combining both allows to make efficient files for reading a small part of the image and for zooming out efficiently at the same time.\u003C\u002Fp\u003E\\n\u003Cp\u003EGDAL has a \u003Ca href=\\\"https:\u002F\u002Fwww.gdal.org\u002Fgdaladdo.html\\\"\u003Ecli command to create the pyramids called gdaladdo\u003C\u002Fa\u003E. The command must be run \u003Cem\u003EBEFORE\u003C\u002Fem\u003E the \u003Cem\u003Egdal_translate\u003C\u002Fem\u003E or the resulting GeoTIFF won&#39;t be COG compliant.\u003C\u002Fp\u003E\\n\u003Cp\u003EThis would make four overview images by averaging the values:\u003C\u002Fp\u003E\\n$ gdaladdo -r average abc.tif 2 4 8 16\u003Ch3 id=\\\"create-a-cog-using-gdal-python\\\"\u003ECreate a COG using gdal-python\u003C\u002Fh3\u003E\\n\u003Cp\u003EThe previous section results can be achieved using python directly, which is nice to integrate in the scripts that generate data.\u003C\u002Fp\u003E\\n\u003Cp\u003E\u003Cpre\u003E\u003Ccode\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Eimport\u003C\u002Fspan\u003E gdal\\n\u003Cspan class=\\\"token keyword\\\"\u003Eimport\u003C\u002Fspan\u003E numpy \u003Cspan class=\\\"token keyword\\\"\u003Eas\u003C\u002Fspan\u003E np\\n\\nx_size \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E10000\u003C\u002Fspan\u003E\\ny_size \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E10000\u003C\u002Fspan\u003E\\nnum_bands \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E4\u003C\u002Fspan\u003E\\nfile_name \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token string\\\"\u003E\\\"\u002Ftmp\u002Ftest.tiff\\\"\u003C\u002Fspan\u003E\\n\\ndata \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E np\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Eones\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Enum_bands\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E y_size\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E x_size\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\ndriver \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E gdal\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EGetDriverByName\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E'GTiff'\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\ndata_set \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E driver\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003ECreate\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Efile_name\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E x_size\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E y_size\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E num_bands\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E\\ngdal\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003EGDT_Float32\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E\\noptions\u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"TILED=YES\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token string\\\"\u003E\\\"COMPRESS=LZW\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token string\\\"\u003E\\\"INTERLEAVE=BAND\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"token keyword\\\"\u003Efor\u003C\u002Fspan\u003E i \u003Cspan class=\\\"token keyword\\\"\u003Ein\u003C\u002Fspan\u003E \u003Cspan class=\\\"token function\\\"\u003Erange\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Enum_bands\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E:\u003C\u002Fspan\u003E\\ndata_set\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EGetRasterBand\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Ei \u003Cspan class=\\\"token operator\\\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EWriteArray\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003Ei\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\n\\ndata_set\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EBuildOverviews\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"NEAREST\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E4\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E8\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E16\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E32\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E64\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\ndata_set \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E None\\n\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fp\u003E\\n\u003Cul\u003E\\n\u003Cli\u003EAs you can see, the creation options are passed as a parameter when creating the data set\u003C\u002Fli\u003E\\n\u003Cli\u003EAlso, the gdal-python bindings have a nice method to create the overviews. The problem is that this will give an error in the COG format, because the pyramids were created after the tiling. It&#39;s not a big error, as we will see in the next section, but you can avoid it by using a \u003Cem\u003Ememory driver file\u003C\u002Fem\u003E before creating the actual one:\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003Cp\u003E\u003Cpre\u003E\u003Ccode\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Eimport\u003C\u002Fspan\u003E gdal\\n\u003Cspan class=\\\"token keyword\\\"\u003Eimport\u003C\u002Fspan\u003E numpy \u003Cspan class=\\\"token keyword\\\"\u003Eas\u003C\u002Fspan\u003E np\\n\\nx_size \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E10000\u003C\u002Fspan\u003E\\ny_size \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E10000\u003C\u002Fspan\u003E\\nnum_bands \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E4\u003C\u002Fspan\u003E\\nfile_name \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token string\\\"\u003E\\\"\u002Ftmp\u002Ftest.tiff\\\"\u003C\u002Fspan\u003E\\n\\ndata \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E np\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Eones\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Enum_bands\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E y_size\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E x_size\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\ndriver \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E gdal\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EGetDriverByName\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E'MEM'\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\ndata_set \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E driver\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003ECreate\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E''\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E x_size\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E y_size\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E num_bands\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E\\ngdal\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003EGDT_Float32\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"token keyword\\\"\u003Efor\u003C\u002Fspan\u003E i \u003Cspan class=\\\"token keyword\\\"\u003Ein\u003C\u002Fspan\u003E \u003Cspan class=\\\"token function\\\"\u003Erange\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Enum_bands\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E:\u003C\u002Fspan\u003E\\ndata_set\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EGetRasterBand\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Ei \u003Cspan class=\\\"token operator\\\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EWriteArray\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003Ei\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\n\\ndata \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E None\\ndata_set\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EBuildOverviews\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"NEAREST\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E4\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E8\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E16\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E32\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E64\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\n\\ndriver \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E gdal\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EGetDriverByName\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E'GTiff'\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\ndata_set2 \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E driver\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003ECreateCopy\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Efile_name\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E data_set\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E\\noptions\u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"COPY_SRC_OVERVIEWS=YES\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token string\\\"\u003E\\\"TILED=YES\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token string\\\"\u003E\\\"COMPRESS=LZW\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\ndata_set \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E None\\ndata_set2 \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E None\\n\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fp\u003E\\n\u003Ch3 id=\\\"checking-if-a-geotiff-is-a-valid-cog\\\"\u003EChecking if a GeoTIFF is a valid COG\u003C\u002Fh3\u003E\\n\u003Cp\u003EEven Rouault made a \u003Ca href=\\\"https:\u002F\u002Fraw.githubusercontent.com\u002FOSGeo\u002Fgdal\u002Fmaster\u002Fgdal\u002Fswig\u002Fpython\u002Fsamples\u002Fvalidate_cloud_optimized_geotiff.py\\\"\u003Enice python script\u003C\u002Fa\u003E that not only checks if the file is a correct COG, but also gives some tips to improve the ones that are correct.\u003C\u002Fp\u003E\\n\u003Cp\u003EFor instance, the file in the \u003Ca href=\\\"https:\u002F\u002Fbeta.observablehq.com\u002F@tmcw\u002Fcloud-optimized-geotiffs\\\"\u003EObservableHQ example\u003C\u002Fa\u003E works, but it&#39;s a not valid COG, because of a problem with the overviews. The script output is:\u003C\u002Fp\u003E\\n\u003Cp\u003E\u003Cpre\u003E\u003Ccode\u003E\\n\\n$ python3 validate_cloud_optimized_geotiff\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003Epy SkySat_Freeport_s03_20170831T162740Z3\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003Etif\\n\\nSkySat_Freeport_s03_20170831T162740Z3\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003Etif is \u003Cspan class=\\\"token constant\\\"\u003ENOT\u003C\u002Fspan\u003E a valid cloud optimized GeoTIFF\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\\nThe following errors were found\u003Cspan class=\\\"token operator\\\"\u003E:\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003Eul\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003Eli\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003EThe offset \u003Cspan class=\\\"token keyword\\\"\u003Eof\u003C\u002Fspan\u003E the first block \u003Cspan class=\\\"token keyword\\\"\u003Eof\u003C\u002Fspan\u003E overview \u003Cspan class=\\\"token keyword\\\"\u003Eof\u003C\u002Fspan\u003E index \u003Cspan class=\\\"token number\\\"\u003E3\u003C\u002Fspan\u003E should be after the one \u003Cspan class=\\\"token keyword\\\"\u003Eof\u003C\u002Fspan\u003E the overview \u003Cspan class=\\\"token keyword\\\"\u003Eof\u003C\u002Fspan\u003E index \u003Cspan class=\\\"token number\\\"\u003E4\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E\u002F\u003C\u002Fspan\u003Eli\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003Eli\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003EThe offset \u003Cspan class=\\\"token keyword\\\"\u003Eof\u003C\u002Fspan\u003E the first block \u003Cspan class=\\\"token keyword\\\"\u003Eof\u003C\u002Fspan\u003E overview \u003Cspan class=\\\"token keyword\\\"\u003Eof\u003C\u002Fspan\u003E index \u003Cspan class=\\\"token number\\\"\u003E2\u003C\u002Fspan\u003E should be after the one \u003Cspan class=\\\"token keyword\\\"\u003Eof\u003C\u002Fspan\u003E the overview \u003Cspan class=\\\"token keyword\\\"\u003Eof\u003C\u002Fspan\u003E index \u003Cspan class=\\\"token number\\\"\u003E3\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E\u002F\u003C\u002Fspan\u003Eli\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003Eli\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003EThe offset \u003Cspan class=\\\"token keyword\\\"\u003Eof\u003C\u002Fspan\u003E the first block \u003Cspan class=\\\"token keyword\\\"\u003Eof\u003C\u002Fspan\u003E overview \u003Cspan class=\\\"token keyword\\\"\u003Eof\u003C\u002Fspan\u003E index \u003Cspan class=\\\"token number\\\"\u003E1\u003C\u002Fspan\u003E should be after the one \u003Cspan class=\\\"token keyword\\\"\u003Eof\u003C\u002Fspan\u003E the overview \u003Cspan class=\\\"token keyword\\\"\u003Eof\u003C\u002Fspan\u003E index \u003Cspan class=\\\"token number\\\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E\u002F\u003C\u002Fspan\u003Eli\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003Eli\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003EThe offset \u003Cspan class=\\\"token keyword\\\"\u003Eof\u003C\u002Fspan\u003E the first block \u003Cspan class=\\\"token keyword\\\"\u003Eof\u003C\u002Fspan\u003E overview \u003Cspan class=\\\"token keyword\\\"\u003Eof\u003C\u002Fspan\u003E index \u003Cspan class=\\\"token number\\\"\u003E0\u003C\u002Fspan\u003E should be after the one \u003Cspan class=\\\"token keyword\\\"\u003Eof\u003C\u002Fspan\u003E the overview \u003Cspan class=\\\"token keyword\\\"\u003Eof\u003C\u002Fspan\u003E index \u003Cspan class=\\\"token number\\\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E\u002F\u003C\u002Fspan\u003Eli\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003Eli\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003EThe offset \u003Cspan class=\\\"token keyword\\\"\u003Eof\u003C\u002Fspan\u003E the first block \u003Cspan class=\\\"token keyword\\\"\u003Eof\u003C\u002Fspan\u003E the main resolution image should be after the one \u003Cspan class=\\\"token keyword\\\"\u003Eof\u003C\u002Fspan\u003E the overview \u003Cspan class=\\\"token keyword\\\"\u003Eof\u003C\u002Fspan\u003E index \u003Cspan class=\\\"token number\\\"\u003E4\u003C\u002Fspan\u003E\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003Cp\u003EWe can easily correct it by running:\u003C\u002Fp\u003E\\ngdal_translate SkySat_Freeport_s03_20170831T162740Z3.tif correct_SkySat_Freeport.tiff -co COMPRESS=LZW -co TILED=YES\u003Cp\u003ENow, the output gives a warning, instead of an error:\u003C\u002Fp\u003E\\n\u003Cp\u003E\u003Cpre\u003E\u003Ccode\u003E\\n$ python3 validate_cloud_optimized_geotiff\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003Epy correct_SkySat_Freeport\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003Etif\\n\\nThe following warnings were found\u003Cspan class=\\\"token operator\\\"\u003E:\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003Eul\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003Eli\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003EThe file is greater than \u003Cspan class=\\\"token number\\\"\u003E512\u003C\u002Fspan\u003ExH or Wx512\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E it is recommended to include internal overviews\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003Cp\u003ESo the previous part removed the internal overviews. That&#39;s because we didn&#39;t use the \u003Cem\u003E-co COPY_SRC_OVERVIEWS=YES\u003C\u002Fem\u003E option:\u003C\u002Fp\u003E\\ngdal_translate SkySat_Freeport_s03_20170831T162740Z3.tif correct_SkySat_Freeport.tiff -co COPY_SRC_OVERVIEWS=YES -co COMPRESS=LZW -co TILED=YES\u003Cp\u003EIt&#39;s important to create the overviews \u003Cem\u003Ebefore\u003C\u002Fem\u003E transforming the file into a GeoTIFF, or otherwise the order will be wrong and the test won&#39;t pass. It will probably work anyway, but it&#39;s better to go with the specification. There&#39;s \u003Ca href=\\\"http:\u002F\u002Ferouault.blogspot.com\u002F2017\u002F10\u002Fgdal-and-cloud-storage.html\\\"\u003Ea post by Even Rouault\u003C\u002Fa\u003E with a discussion about this error.\u003C\u002Fp\u003E\\n\u003Ch2 id=\\\"reading-a-cloud-optimized-geotiff-file\\\"\u003EReading a Cloud Optimized GeoTIFF file\u003C\u002Fh2\u003E\\n\u003Cp\u003ECOG can be used to store a huge multi-layer file in the cloud so your scripts can use parts of it, or you can download the part you need to create an interactive map, or use \u003Ca href=\\\"https:\u002F\u002Fterracotta-python.readthedocs.io\u002Fen\u002Flatest\u002Ftutorials\u002Faws.html\\\"\u003ETerracotta\u003C\u002Fa\u003E to create the tiles directly at AWS uploading only the whole GaoTIFF.\u003C\u002Fp\u003E\\n\u003Ch3 id=\\\"using-geotiffjs-to-read-a-cog\\\"\u003EUsing geotiff.js to read a COG\u003C\u002Fh3\u003E\\n\u003Cp\u003EThe awesome geotiff.js has been adapted to read COG files, which make really easy to use them without thinking about the format.\u003C\u002Fp\u003E\\n\u003Cp\u003EI learnt how to work with COG and geotiff.js looking at \u003Ca href=\\\"https:\u002F\u002Fbeta.observablehq.com\u002F@tmcw\u002Fcloud-optimized-geotiffs\\\"\u003Ethis ObservableHQ example\u003C\u002Fa\u003E. I&#39;ll try to expand a little the important points.\u003C\u002Fp\u003E\\n\u003Cp\u003EThe first point to understand is that geotiff-js has now many asynchronous methods, because it has to open the file, but also read the different parts of it. Let&#39;s see a small example that just reads a square of 10x10 pixels.\u003C\u002Fp\u003E\\n\u003Cp\u003E\u003Cpre\u003E\u003Ccode\u003E\\n\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token keyword\\\"\u003Easync\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E{\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Econst\u003C\u002Fspan\u003E tiff \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Eawait\u003C\u002Fspan\u003E GeoTIFF\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EfromUrl\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"out.tiff\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\nconsole\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"Number of images (pyramids):\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Eawait\u003C\u002Fspan\u003E tiff\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EgetImageCount\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"token keyword\\\"\u003Econst\u003C\u002Fspan\u003E image \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Eawait\u003C\u002Fspan\u003E tiff\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EgetImage\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\nconsole\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"Bounding box:\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E image\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EgetBoundingBox\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\nconsole\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"Width:\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E image\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EgetWidth\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"token keyword\\\"\u003Elet\u003C\u002Fspan\u003E data \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Eawait\u003C\u002Fspan\u003E image\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EreadRasters\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E{\u003C\u002Fspan\u003E\\nwindow\u003Cspan class=\\\"token operator\\\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E200\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E200\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E210\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E210\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E samples\u003Cspan class=\\\"token operator\\\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token punctuation\\\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\\nconsole\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"Values:\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E data\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"token punctuation\\\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fp\u003E\\n\u003Cp\u003EThe output is:\u003C\u002Fp\u003E\\n\u003Cimg src=\\\"\u002Fimages\u002Fother\u002Fcog\u002Fconsole_gtiffjs.png\\\"\u002F\u003E\\n\\n\u003Cul\u003E\\n\u003Cli\u003EI used the async\u002Fawait technique to make the code easier to understand. In this case, opening the image, getting the actual image and reading the image data are three asynchronous methods.\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Cem\u003EgetImage()\u003C\u002Fem\u003E will return the main pyramid, with the original resolution. Is the same as \u003Cem\u003E.getImage(0)\u003C\u002Fem\u003E. In the example, another pyramid is created, so using \u003Cem\u003E.getImage(1)\u003C\u002Fem\u003E, an image with a 500px width would returned\u003C\u002Fli\u003E\\n\u003Cli\u003EThe \u003Cem\u003Eimage\u003C\u002Fem\u003E object has all the pyramid properties, but not the actual data, which has to be retrieved using the \u003Cem\u003EreadRasters\u003C\u002Fem\u003E method\u003Cul\u003E\\n\u003Cli\u003EThe \u003Cem\u003EreadRasters\u003C\u002Fem\u003E method has several options. In this case, the \u003Cem\u003Ewindow\u003C\u002Fem\u003E argument asks to get only some of the pixels, taking advantage of being a COG\u003C\u002Fli\u003E\\n\u003Cli\u003EThe \u003Cem\u003Esamples\u003C\u002Fem\u003E parameter is the band number. The example file had two separate bands, so using \u003Cem\u003Esamples: [1]\u003C\u002Fem\u003E would return the second band. All the desired bands can be passed into this parameter, so the result of \u003Cem\u003Esamples: [0, 1]\u003C\u002Fem\u003E would be an array with two \u003Cem\u003EFloat32Array\u003C\u002Fem\u003E elements, one for each band\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003Cp\u003EWhat about the queries? This is the \u003Cem\u003Enetwork\u003C\u002Fem\u003E tab on the developer tools:\u003C\u002Fp\u003E\\n\u003Cimg src=\\\"\u002Fimages\u002Fother\u002Fcog\u002Fnetwork_gtiffjs.png\\\"\u002F\u003E\\n\\n\u003Cp\u003EWe can see three downloads of the \u003Cem\u003Eout.tiff\u003C\u002Fem\u003E file:\u003C\u002Fp\u003E\\n\u003Cul\u003E\\n\u003Cli\u003EThe first one is the header for the main image.\u003C\u002Fli\u003E\\n\u003Cli\u003EThe second the header for the first pyramid. If the image had no pyramids, this wouldn&#39;t appear.\u003C\u002Fli\u003E\\n\u003Cli\u003EThe third is the data (note the different size).\u003Cul\u003E\\n\u003Cli\u003EIf two different bands are to be retrieved, an extra request will appear. This is because I separated the tiff in separate bands, since they are data bands. If the file is a satellite with the rgb bands, keeping the three bands together would be more efficient.\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003Cp\u003ENote that all the above has been transparent, which is really cool.\u003C\u002Fp\u003E\\n\u003Ch4 id=\\\"an-example-with-rgb\\\"\u003EAn example with RGB\u003C\u002Fh4\u003E\\n\u003Cp\u003EThere&#39;s \u003Ca href=\\\"https:\u002F\u002Fbeta.observablehq.com\u002F@tmcw\u002Fcloud-optimized-geotiffs\\\"\u003Ea nice example at ObservableHQ\u003C\u002Fa\u003E showing how to use an RGB GeoTIFF when it&#39;s cloud optimized.\u003C\u002Fp\u003E\\n\u003Cimg src=\\\"\u002Fimages\u002Fother\u002Fcog\u002Frgb.png\\\"\u002F\u003E\\n\\n\u003Cp\u003EThe \u003Cem\u003Einteresting\u003C\u002Fem\u003E part is this one:\u003C\u002Fp\u003E\\n\u003Cp\u003E\u003Cpre\u003E\u003Ccode\u003E\\n\u003Cspan class=\\\"token function-variable function\\\"\u003EreadImageData\u003C\u002Fspan\u003E \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Easync\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token parameter\\\"\u003Eimage\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E options \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\\\"token operator\\\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E{\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Econst\u003C\u002Fspan\u003E rasters \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Eawait\u003C\u002Fspan\u003E image\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EreadRasters\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Eoptions\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Elet\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003Er\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E g\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E b\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E rasters\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Elet\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E{\u003C\u002Fspan\u003E width\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E height \u003Cspan class=\\\"token punctuation\\\"\u003E}\u003C\u002Fspan\u003E \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E rasters\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Econst\u003C\u002Fspan\u003E data \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\\\"token class-name\\\"\u003EUint8ClampedArray\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Ewidth _ height _ \u003Cspan class=\\\"token number\\\"\u003E4\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Efor\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token keyword\\\"\u003Elet\u003C\u002Fspan\u003E i \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E i \u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003E r\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003Elength\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E i\u003Cspan class=\\\"token operator\\\"\u003E++\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E{\u003C\u002Fspan\u003E\\ndata\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003Ei \u003Cspan class=\\\"token operator\\\"\u003E*\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E4\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E r\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003Ei\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\ndata\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003Ei \u003Cspan class=\\\"token operator\\\"\u003E*\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E4\u003C\u002Fspan\u003E \u003Cspan class=\\\"token operator\\\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E g\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003Ei\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\ndata\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003Ei \u003Cspan class=\\\"token operator\\\"\u003E*\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E4\u003C\u002Fspan\u003E \u003Cspan class=\\\"token operator\\\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E b\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003Ei\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\ndata\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003Ei \u003Cspan class=\\\"token operator\\\"\u003E*\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E4\u003C\u002Fspan\u003E \u003Cspan class=\\\"token operator\\\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E3\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E r\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003Ei\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\\\"token operator\\\"\u003E==\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E0\u003C\u002Fspan\u003E \u003Cspan class=\\\"token operator\\\"\u003E?\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E0\u003C\u002Fspan\u003E \u003Cspan class=\\\"token operator\\\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E255\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token punctuation\\\"\u003E}\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\\\"token class-name\\\"\u003EImageData\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E width\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E height\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token punctuation\\\"\u003E}\u003C\u002Fspan\u003E\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fp\u003E\\n\u003Cul\u003E\\n\u003Cli\u003EThe r,g and b channels are separated in layers, but to draw the image, we want it in a Uint8ClampedArray\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Cem\u003Econtext.putImageData(data, 0, 0);\u003C\u002Fem\u003E is then the way to draw the data directly. Quite easy!\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003Ch4 id=\\\"an-example-with-numerical-data\\\"\u003EAn example with numerical data\u003C\u002Fh4\u003E\\n\u003Cp\u003EIn this case, the data in the GeoTIFF is a matrix with the numerical values (temperature in our case). The \u003Cem\u003Esample.tiff\u003C\u002Fem\u003E file is big, 26MB, so making the client to download all the data is not an option.\u003C\u002Fp\u003E\\n\u003Cp\u003EI&#39;m using the marching squares algorithm to show the regions where the data is between two thresholds. You can see \u003Ca href=\\\"https:\u002F\u002Fgeoexamples.com\u002Fd3-raster-tools-docs\u002Fplot\u002Fisobands.html\\\"\u003Ea tutorial here\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\\n\u003Cp\u003E\u003Ca href=\\\"https:\u002F\u002Fbl.ocks.org\u002Frveciana\u002F9d9ef3282959a41c3e54cedb717bdddf\\\"\u003EClick here to see the working example\u003C\u002Fa\u003E]\\n\u003Cpre\u003E\u003Ccode\u003E\\n\\n\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token keyword\\\"\u003Easync\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E{\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Econst\u003C\u002Fspan\u003E tiff \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Eawait\u003C\u002Fspan\u003E GeoTIFF\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EfromUrl\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"sample.tiff\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Elet\u003C\u002Fspan\u003E image \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Eawait\u003C\u002Fspan\u003E tiff\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EgetImage\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E3\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Elet\u003C\u002Fspan\u003E rasterData \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Eawait\u003C\u002Fspan\u003E image\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EreadRasters\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E{\u003C\u002Fspan\u003Esamples\u003Cspan class=\\\"token operator\\\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\nrasterData \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E rasterData\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Elet\u003C\u002Fspan\u003E data \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\\\"token class-name\\\"\u003EArray\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Eimage\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EgetHeight\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Efor\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token keyword\\\"\u003Elet\u003C\u002Fspan\u003E j \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E j\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003Eimage\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EgetHeight\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E j\u003Cspan class=\\\"token operator\\\"\u003E++\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E{\u003C\u002Fspan\u003E\\n    data\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003Ej\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\\\"token class-name\\\"\u003EArray\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Eimage\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EgetWidth\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"token keyword\\\"\u003Efor\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token keyword\\\"\u003Elet\u003C\u002Fspan\u003E i \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E i\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003Eimage\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EgetWidth\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E i\u003Cspan class=\\\"token operator\\\"\u003E++\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E{\u003C\u002Fspan\u003E\\n      data\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003Ej\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003Ei\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E rasterData\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003Ei \u003Cspan class=\\\"token operator\\\"\u003E+\u003C\u002Fspan\u003E j\u003Cspan class=\\\"token operator\\\"\u003E*\u003C\u002Fspan\u003Eimage\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EgetWidth\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"token punctuation\\\"\u003E}\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token punctuation\\\"\u003E}\u003C\u002Fspan\u003E\\n\\n\\n\u003Cspan class=\\\"token keyword\\\"\u003Elet\u003C\u002Fspan\u003E intervals \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E4\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E6\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E8\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E10\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E12\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E14\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E16\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E18\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E20\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Elet\u003C\u002Fspan\u003E bands \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E rastertools\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Eisobands\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E intervals\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"token keyword\\\"\u003Elet\u003C\u002Fspan\u003E colorScale \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E d3\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EscaleSequential\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Ed3\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003EinterpolateBuPu\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Elet\u003C\u002Fspan\u003E canvas \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E d3\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Eselect\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"body\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Eappend\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"canvas\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Eattr\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"width\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E680\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Eattr\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"height\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E500\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"token keyword\\\"\u003Elet\u003C\u002Fspan\u003E context \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E canvas\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Enode\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EgetContext\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"2d\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"token keyword\\\"\u003Elet\u003C\u002Fspan\u003E path \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E d3\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EgeoPath\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\n             \u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Econtext\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Econtext\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\\nbands\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003Efeatures\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EforEach\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token keyword\\\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token parameter\\\"\u003Ed\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E i\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E{\u003C\u002Fspan\u003E\\n  context\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EbeginPath\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n  context\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003EglobalAlpha \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E0.7\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n  context\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003EfillStyle \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token function\\\"\u003EcolorScale\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E2\u003C\u002Fspan\u003E \u003Cspan class=\\\"token operator\\\"\u003E+\u003C\u002Fspan\u003E intervals\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003Ei\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E22\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n  \u003Cspan class=\\\"token function\\\"\u003Epath\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Ed\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n  context\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Efill\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token punctuation\\\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"token punctuation\\\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fp\u003E\\n\u003Cp\u003EThe output will be like this (all the GeoTIFF coverage):\u003C\u002Fp\u003E\\n\u003Cimg src=\\\"\u002Fimages\u002Fother\u002Fcog\u002Fjs_example1.png\\\"\u002F\u003E\\n\\n\u003Cul\u003E\\n\u003Cli\u003EIn this case, only the smallest overlay is used. Why? Because it&#39;s got about 350x350 pixels. This is enough to create the isobands. So, in case you don&#39;t know which overlay to take, this is a good orientation\u003Cul\u003E\\n\u003Cli\u003E\u003Cem\u003Etiff.getImage(3)\u003C\u002Fem\u003E is the place where the overlay is chosen\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003C\u002Fli\u003E\\n\u003Cli\u003EThe color scale and path drawing are using the usual d3js library tools. This is just an example and everything could be done with other tools, although d3js is still the best option\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003Cp\u003ELet&#39;s see another example using the image with the highest resolution, but downloading just a small part using the GeoTIFF capabilities.\u003C\u002Fp\u003E\\n\u003Cp\u003E\u003Ca href=\\\"https:\u002F\u002Fbl.ocks.org\u002Frveciana\u002F5b844350ad418787d3ee402cc566fff9\\\"\u003EClick here to see the working example\u003C\u002Fa\u003E]\u003C\u002Fp\u003E\\n\u003Cp\u003E\u003Cpre\u003E\u003Ccode\u003E\\n\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token keyword\\\"\u003Easync\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E{\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Elet\u003C\u002Fspan\u003E origin \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E700\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E600\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Elet\u003C\u002Fspan\u003E size \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E500\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E450\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Econst\u003C\u002Fspan\u003E tiff \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Eawait\u003C\u002Fspan\u003E GeoTIFF\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EfromUrl\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"\u002Frveciana\u002Fraw\u002F9d9ef3282959a41c3e54cedb717bdddf\u002Fsample.tiff\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Elet\u003C\u002Fspan\u003E image \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Eawait\u003C\u002Fspan\u003E tiff\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EgetImage\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Elet\u003C\u002Fspan\u003E rasterData \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Eawait\u003C\u002Fspan\u003E image\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EreadRasters\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E{\u003C\u002Fspan\u003Ewindow\u003Cspan class=\\\"token operator\\\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003Eorigin\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E origin\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E\\norigin\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\\\"token operator\\\"\u003E+\u003C\u002Fspan\u003E size\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E origin\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\\\"token operator\\\"\u003E+\u003C\u002Fspan\u003E size\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E\\nsamples\u003Cspan class=\\\"token operator\\\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\nrasterData \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E rasterData\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Elet\u003C\u002Fspan\u003E data \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\\\"token class-name\\\"\u003EArray\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Esize\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Efor\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token keyword\\\"\u003Elet\u003C\u002Fspan\u003E j \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E j\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003Esize\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E j\u003Cspan class=\\\"token operator\\\"\u003E++\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E{\u003C\u002Fspan\u003E\\n    data\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003Ej\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\\\"token class-name\\\"\u003EArray\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Esize\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"token keyword\\\"\u003Efor\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token keyword\\\"\u003Elet\u003C\u002Fspan\u003E i \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E i\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003Esize\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E i\u003Cspan class=\\\"token operator\\\"\u003E++\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E{\u003C\u002Fspan\u003E\\n      data\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003Ej\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003Ei\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E rasterData\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003Ei \u003Cspan class=\\\"token operator\\\"\u003E+\u003C\u002Fspan\u003E j\u003Cspan class=\\\"token operator\\\"\u003E*\u003C\u002Fspan\u003Esize\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"token punctuation\\\"\u003E}\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token punctuation\\\"\u003E}\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"token keyword\\\"\u003Elet\u003C\u002Fspan\u003E intervals \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E4\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E6\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E8\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E10\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E12\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E14\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E16\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E18\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E20\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Elet\u003C\u002Fspan\u003E bands \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E rastertools\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Eisobands\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E intervals\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"token keyword\\\"\u003Elet\u003C\u002Fspan\u003E colorScale \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E d3\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EscaleSequential\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Ed3\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003EinterpolateBuPu\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"token keyword\\\"\u003Elet\u003C\u002Fspan\u003E canvas \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E d3\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Eselect\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"body\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Eappend\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"canvas\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Eattr\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"width\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E680\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Eattr\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"height\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E500\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"token keyword\\\"\u003Elet\u003C\u002Fspan\u003E context \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E canvas\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Enode\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EgetContext\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"2d\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"token keyword\\\"\u003Elet\u003C\u002Fspan\u003E path \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E d3\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EgeoPath\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\n             \u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Econtext\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Econtext\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\\nbands\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003Efeatures\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EforEach\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token keyword\\\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token parameter\\\"\u003Ed\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E i\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E{\u003C\u002Fspan\u003E\\n  context\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EbeginPath\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n  context\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003EglobalAlpha \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E0.7\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n  context\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003EfillStyle \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token function\\\"\u003EcolorScale\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E2\u003C\u002Fspan\u003E \u003Cspan class=\\\"token operator\\\"\u003E+\u003C\u002Fspan\u003E intervals\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003Ei\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E22\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n  \u003Cspan class=\\\"token function\\\"\u003Epath\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Ed\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n  context\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Efill\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token punctuation\\\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"token punctuation\\\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fp\u003E\\n\u003Cp\u003EThe output will be like this (a zoomed portion of the previous example):\u003C\u002Fp\u003E\\n\u003Cimg src=\\\"\u002Fimages\u002Fother\u002Fcog\u002Fjs_example2.png\\\"\u002F\u003E\\n\\n\u003Cul\u003E\\n\u003Cli\u003E\u003Cem\u003Etiff.getImage(0)\u003C\u002Fem\u003E will get the main image, not an overview. Using \u003Cem\u003Etiff.getImage()\u003C\u002Fem\u003E would give the same result\u003C\u002Fli\u003E\\n\u003Cli\u003ENote that \u003Cem\u003Eimage.getHeight()\u003C\u002Fem\u003E and \u003Cem\u003Eimage.getWidth()\u003C\u002Fem\u003E have been changed by the width and height we want to show. That&#39;s, of course, because we want to get just a part of the image\u003C\u002Fli\u003E\\n\u003Cli\u003ENow, the \u003Cem\u003Ewindow\u003C\u002Fem\u003E parameter is used in \u003Cem\u003Eimage.readRasters\u003C\u002Fem\u003E, to select the portion we want to have. We set an offset (upper left pixel) and the size of the data we want\u003C\u002Fli\u003E\\n\u003Cli\u003EThis case is a little slow because it has many pixels and generating the isobands takes a bit. An alternative could be using an overview or drawing the pixels directly, since they are small enough\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003Ch3 id=\\\"using-gdal-to-read-a-cog\\\"\u003EUsing GDAL to read a COG\u003C\u002Fh3\u003E\\n\u003Cp\u003EA COG can be read from the command line too! \u003Ca href=\\\"https:\u002F\u002Ftrac.osgeo.org\u002Fgdal\u002Fwiki\u002FCloudOptimizedGeoTIFF\\\"\u003EThis page\u003C\u002Fa\u003E explains how. It&#39;s possible, for instance, to get a pixel value by using \u003Ca href=\\\"https:\u002F\u002Fwww.gdal.org\u002Fgdallocationinfo.html\\\"\u003Egdallocationinfo\u003C\u002Fa\u003E:\u003C\u002Fp\u003E\\ngdallocationinfo --debug on \u002Fvsicurl\u002Fhttp:\u002F\u002Feven.rouault.free.fr\u002Fgtiff_test\u002FS2A_MSIL1C_20170102T111442_N0204_R137_T30TXT_20170102T111441_TCI_cloudoptimized_512.tif  5000 5000\u003Cp\u003EThis will check the position 5000, 5000 on the defined file, which is located on a remote server. And will use the COG capabilities.\u003C\u002Fp\u003E\\n\u003Cp\u003EOn the \u003Ca href=\\\"https:\u002F\u002Ftrac.osgeo.org\u002Fgdal\u002Fwiki\u002FCloudOptimizedGeoTIFF\\\"\u003Eexplanation page\u003C\u002Fa\u003E, it&#39;s discussed that using overviews can be faster.\u003C\u002Fp\u003E\\n\u003Cp\u003ETo read a part of the array and store it into a tiff file, use gdal_translate:\u003C\u002Fp\u003E\\ngdal_translate --debug on \\\\\\n\u002Fvsicurl\u002Fhttp:\u002F\u002Feven.rouault.free.fr\u002Fgtiff_test\u002FS2A_MSIL1C_20170102T111442_N0204_R137_T30TXT_20170102T111441_TCI_cloudoptimized_512.tif \\\\\\n-srcwin 1024 1024 256 256 out.tif\u003Cp\u003EAgain, this is discussed in the \u003Ca href=\\\"https:\u002F\u002Ftrac.osgeo.org\u002Fgdal\u002Fwiki\u002FCloudOptimizedGeoTIFF\\\"\u003Eexplanation page\u003C\u002Fa\u003E, comparing which type of file (with\u002Fwithout tiles or overviews) works better.\u003C\u002Fp\u003E\\n\u003Ch2 id=\\\"links\\\"\u003ELinks\u003C\u002Fh2\u003E\\n\u003Cul\u003E\\n\u003Cli\u003E\u003Ca href=\\\"https:\u002F\u002Fwww.cogeo.org\u002F\\\"\u003EThe COG web site\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"https:\u002F\u002Ftrac.osgeo.org\u002Fgdal\u002Fwiki\u002FCloudOptimizedGeoTIFF\\\"\u003EThe GDAL Cloud Optimized Geotiff web page\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"https:\u002F\u002Fwww.gdal.org\u002Ffrmt_gtiff.html\\\"\u003EThe GDAL GeoTIFF format manual page\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"https:\u002F\u002Fwww.gdal.org\u002Fgdaladdo.html\\\"\u003EThe gdaladdo manual page\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"https:\u002F\u002Fgis.stackexchange.com\u002Fa\u002F255847\u002F6503\\\"\u003EA StackOverflow answer tot he overviews format\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"https:\u002F\u002Fraw.githubusercontent.com\u002FOSGeo\u002Fgdal\u002Fmaster\u002Fgdal\u002Fswig\u002Fpython\u002Fsamples\u002Fvalidate_cloud_optimized_geotiff.py\\\"\u003ECloud Optimized GeoTIFF validator\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"http:\u002F\u002Ferouault.blogspot.com\u002F2017\u002F10\u002Fgdal-and-cloud-storage.html\\\"\u003EBlog post explaining the overviews problem\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"https:\u002F\u002Fterracotta-python.readthedocs.io\u002Fen\u002Flatest\u002Ftutorials\u002Faws.html\\\"\u003ETerracotta\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"https:\u002F\u002Fgeotiffjs.github.io\u002F\\\"\u003EThe geotiff.js site\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"https:\u002F\u002Fbeta.observablehq.com\u002F@tmcw\u002Fcloud-optimized-geotiffs\\\"\u003EAn ObservableHQ interactive example\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"https:\u002F\u002Fbl.ocks.org\u002Frveciana\u002F9d9ef3282959a41c3e54cedb717bdddf\\\"\u003EFirst JavaScript example with data: Overviews\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"https:\u002F\u002Fbl.ocks.org\u002Frveciana\u002F5b844350ad418787d3ee402cc566fff9\\\"\u003ESecond JavaScript example with data: Region\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"https:\u002F\u002Fgeoexamples.com\u002Fd3-raster-tools-docs\u002Fplot\u002Fisobands.html\\\"\u003EIsobands tutorial\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\",\"tags\":[\"COG\",\"GDAL\",\"raster\"],\"date\":\"2019-02-08T00:00:00.000Z\",\"thumbnail\":\"\u002Fimages\u002Fother\u002Fcog\u002Ftwitter.png\"}"}</script>
</div>
	</body>
</html>
