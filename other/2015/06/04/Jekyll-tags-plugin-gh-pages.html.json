{"title":"Jekyll tags and categories plugin for gh-pages","contents":"<p>Switching from <a href=\"http://www.blogger.com\">Blogger</a> to <a href=\"http://jekyllrb.com/\">Jekyll</a> was an amazing experience. Everything was quite easy (although not as fast as I thought, it&#39;s always the same). I found only one problem a bit difficult to solve:</p>\n<p>I wanted to use the <a href=\"https://pages.github.com/\">GitHub pages hosting</a>, uploading the Jekyll site source, not the final site, so I could have it everywhere just cloning the repo.</p>\n<p>At the same time, I wanted to have categories and tags pages (a page for each tag and category).</p>\n<p>I found two solutions to the problem:</p>\n<ul>\n<li>Using a plugin like <a href=\"https://github.com/recurser/jekyll-plugins\">this one</a>, which creates the pages. The problem is that GitHub doesn&#39;t accept custom plugins for security reasons.</li>\n<li>Creating the templates for each tag and category, as explained in <a href=\"http://www.minddust.com/post/tags-and-categories-on-github-pages/\">this post</a>. The solutions works perfectly on GitHub pages, but a new template has to be created manually every time a category or tag is added to the blog!</li>\n</ul>\n<p>So I decided creating a small plugin that pre-generates the templated needed by the second solution. You can create the posts locally, and the templated will be created by the plugin. Then, upload the new post and templates to GitHub and that&#39;s it.</p>\n<p>There are two problems:</p>\n<ul>\n<li>When the Jekyll server is started, new tags or categories won&#39;t be generated on the _site folder. You have to start it again. When adding new tags with the server running, works ok. This could be solved using <a href=\"http://jekyllrb.com/docs/plugins/#hooks\">hooks</a>, I guess, but this feature is not released yet.</li>\n<li>Files edited directly on GitHub won&#39;t run the plugin, so the new tags or categories won&#39;t appear until the site is generated locally. Without plugins running there, there is no solution for that.</li>\n</ul>\n<h2 id=\"installation\">Installation</h2>\n<p>Copy the following files to the <em>\\</em>layouts_ dir:</p>\n<p>blog_by_category.html</p>\n<p><pre><code>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span>Articles by category :<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n    %}\n        %}\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n        %}\n    %}\n        \nThere are no posts for this category.\n    %}\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n\n\n</code></pre></p>\n<p>blog_by_tag.html\n<pre><code>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span>Articles by tag :<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n   %}\n        %}\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>/</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n        %}\n    %}\n        \nThere are no posts for this tag.\n    %}\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n\n\n</code></pre></p>\n<p>And the plugin to the <em>\\</em>plugins_ dir:</p>\n<p>categories_tags_generator.rb</p>\n<p>{% highlight ruby linenos %}\nmodule Jekyll\nclass TagsGenerator &lt; Generator</p>\ndef generate(site)\n    tags_dir = Dir.pwd + &#39;/tags&#39;\n\n    if !Dir.exists?(tags_dir)\n        puts &quot;Creating tags dir&quot;\n        Dir.mkdir(tags_dir)\n    end\n    regenerate_flag = false\n\n    site.tags.each do |i|\n        if !File.exists?(tags_dir + &#39;/&#39; + i[0])\n            puts &quot;Creating tag page for: &quot; + i[0]\n            tag_file = File.new(tags_dir + &#39;/&#39; + i[0], &quot;w&quot;)\n            tag_file.puts(&quot;---\\nlayout: blog_by_tag\\ntag: &quot; + i[0] + &quot;\\npermalink: /tags/&quot; + i[0] + &quot;/\\n---&quot;)\n            tag_file.close\n\n            regenerate_flag = true\n        end\n    end\n\n    if regenerate_flag\n        FileUtils.touch Dir.pwd+&#39;/_config.yml&#39;\n    end\n\n\n\nend<p>end\nend\n{% endhighlight %}</p>\n<p>Now you will have the url <em>/tags/[name_of_the_tag]</em> and <em>/categories/[name_of_teh_category]</em> pages accessible. There are many ways to create the links to them. To put an example, I create a category list and a tag word cloud using this code in the <em>blog</em> page:</p>\n<p>Next post will be about maps again!</p>\n","tags":["jekyll"],"date":"2015-06-04T18:40:53.000Z"}