<!DOCTYPE html>
<html lang="en">
	<head>
		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=G-BD6G9PF6NH"></script>
		<script>
			window.dataLayer = window.dataLayer || [];
			function gtag() {
				dataLayer.push(arguments);
			}
			gtag('js', new Date());

			gtag('config', 'G-BD6G9PF6NH');
		</script>

		<meta charset="utf-8" />
		<link rel="icon" href="/favicon.ico" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="manifest" href="/manifest.json" />
		<meta name="theme-color" content="#cdffcd" />
		<!-- HTML Meta Tags -->
		<meta
			name="description"
			content="I am a software developer and meteorologist who likes mapping. I put here the things I learn on my free time."
		/>
		<!-- Google / Search Engine Tags -->
		<meta itemprop="name" content=">GeoExamples - Roger Veciana" />
		<meta
			itemprop="description"
			content="I am a software developer and meteorologist who likes mapping. I put here the things I learn on my free time."
		/>
		<meta itemprop="image" content="https://geoexamples.com/siteImage.png" />

		<title>GeoExamples - Raster file formats for JavaScript mapping</title><meta name="twitter:card" content="summary" data-svelte="svelte-w2s84v"><meta name="twitter:title" content="GeoExamples - Raster file formats for JavaScript mapping" data-svelte="svelte-w2s84v"><meta name="twitter:description" content="&lt;p&gt;Some time ago, I " data-svelte="svelte-w2s84v"><meta name="twitter:image" content="https://geoexamples.com/images/d3/raster-file-formats-javascript/twitter.png" data-svelte="svelte-w2s84v"><meta property="og:url" content="https://geoexamples.com" data-svelte="svelte-w2s84v"><meta property="og:type" content="website" data-svelte="svelte-w2s84v"><meta property="og:title" content="GeoExamples - Raster file formats for JavaScript mapping" data-svelte="svelte-w2s84v"><meta property="og:description" content="I am a software developer and meteorologist who likes mapping. I put here the things I learn on my free time." data-svelte="svelte-w2s84v"><meta property="og:image" content="https://geoexamples.com/images/d3/raster-file-formats-javascript/twitter.png" data-svelte="svelte-w2s84v">

		

		<link rel="modulepreload" href="/app/start-98c290b0.js">
		<link rel="modulepreload" href="/app/chunks/vendor-f4f84e30.js">
		<link rel="modulepreload" href="/app/pages/__layout.svelte-b5745e7e.js">
		<link rel="modulepreload" href="/app/chunks/config-b3bde751.js">
		<link rel="modulepreload" href="/app/pages/[category]/[year]/[month]/[date]/[slug].svelte-dcec41b3.js">
		<link rel="stylesheet" href="/app/assets/start-a8cd1609.css">
		<link rel="stylesheet" href="/app/assets/pages/__layout.svelte-294fb61c.css">

		<script type="module">
			import { start } from "/app/start-98c290b0.js";
			start({
				target: document.querySelector("#svelte"),
				paths: {"base":"","assets":""},
				session: {},
				host: location.host,
				route: true,
				spa: false,
				trailing_slash: "never",
				hydrate: {
					status: 200,
					error: null,
					nodes: [
						import("/app/pages/__layout.svelte-b5745e7e.js"),
						import("/app/pages/[category]/[year]/[month]/[date]/[slug].svelte-dcec41b3.js")
					],
					page: {
						host: location.host, // TODO this is redundant
						path: "/d3/2017/11/04/raster-file-formats.html",
						query: new URLSearchParams(""),
						params: {"category":"d3","year":"2017","month":"11","date":"04","slug":"raster-file-formats.html"}
					}
				}
			});
		</script>
	</head>
	<body>
		<div id="svelte">


<header class="site-header"><div class="wrapper"><a class="site-title" href="/">GeoExamples - Roger Veciana</a>

<nav class="site-nav"><div href="#" class="menu-icon"><svg viewBox="0 0 18 15"><path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"></path><path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"></path><path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"></path></svg></div>

	<div class="trigger"><a class="page-link" href="/about">About</a><a class="page-link" href="/blog">Blog</a><a class="page-link" href="/projects">Projects</a></div></nav></div></header>

<main class="page-content"><div class="wrapper">
<div class="post"><header class="post-header"><h1 class="post-title">Raster file formats for JavaScript mapping</h1>
<p class="post-meta">Nov 4, 2017</p></header>

	<article class="post-content"><!-- HTML_TAG_START --><p>Some time ago, I made some docs about <a href="http://geoexamples.com/d3-raster-tools-docs/">drawing raster data with d3js</a>.</p>
<p>All the examples GeoTIFF files to get the data, but there are many other possibilities. I&#39;ve made the exercice to create some examples using the same dataset but different strategies for creating the data with different formats.</p>
<h2 id="table-of-contents">Table of contents</h2>
<ul>
<li><a href="#the-data">The data</a></li>
<li><a href="#geotiff">GeoTIFF</a><ul>
<li><a href="#compression">Compression</a></li>
<li><a href="#html-example">HTML example</a></li>
</ul>
</li>
<li><a href="#netcdf">NetCDF</a><ul>
<li><a href="#html-example-1">HTML example</a></li>
</ul>
</li>
<li><a href="#json">JSON</a><ul>
<li><a href="#html-example-2">HTML example</a></li>
</ul>
</li>
<li><a href="#json-with-encoded-data">JSON with encoded data</a><ul>
<li><a href="#html-example-3">HTML example</a></li>
</ul>
</li>
<li><a href="#binary-data">Binary data</a><ul>
<li><a href="#html-example-4">HTML example</a></li>
</ul>
</li>
<li><a href="#lzw-compressed-binary-data">LZW compressed binary data</a><ul>
<li><a href="#file-creation-using-python">File creation using Python</a></li>
<li><a href="#html-example-5">HTML example</a></li>
</ul>
</li>
<li><a href="#performance-comparison">Performance comparison</a></li>
<li><a href="#what-to-do-with-all-this-binary-data">What to do with all this binary data?</a></li>
<li><a href="#links">Links</a></li>
</ul>
<h2 id="the-data">The data</h2>
<p>All the examples use the data from <a href="http://bl.ocks.org/rveciana/420a33fd0963e2a6aad16da54725af36">this block</a>. You can see <a href="http://geoexamples.com/d3-raster-tools-docs/code_samples/vardah.html">how I got the data here</a>. I have taken only the first layer (msl pressure) to make the examples simpler:</p>
gdal_translate -b 1 vardah.tiff vardah_new.tiff<p>You can <a href="http://bl.ocks.org/rveciana/raw/420a33fd0963e2a6aad16da54725af36/vardah.tiff">download here</a> the original <a href="http://bl.ocks.org/rveciana/raw/420a33fd0963e2a6aad16da54725af36/vardah.tiff">vardah.tiff</a> file.</p>
<h2 id="geotiff">GeoTIFF</h2>
<p>As in the original example, GeoTIFF can be used as a way to get the raster data. It&#39;s got many advantages, such as being the most widespread format, able to be compressed, that it&#39;s possible to open it directly with any GIS program such as QGIS.</p>
<p>To use it, use the <a href="https://github.com/constantinius/geotiff.js">geotiff.js library</a>.</p>
<h3 id="compression">Compression</h3>
<p>The compressed images are read directly by the latest versions of the library. The compression can reduce the size a lot, specially with the <em>Deflate</em> option. The parsing time is bigger when the image is compressed, but the time is acceptable.</p>
<p>To create a compressed GeoTIFF file, use the gdal creation options:</p>
gdal_translate -of GTiff -co COMPRESS=DEFLATE vardah.tiff vardah2.tiff
gdal_translate -of GTiff -co COMPRESS=LZW vardah.tiff vardah2.tiff
gdal_translate -of GTiff -co COMPRESS=PACKBITS vardah.tiff vardah2.tiff<p>Other compression options are not available with the geotiffjs library.</p>
<p>Another thing to take in account is the metadata. The geotransform data is stored in a quite strange way (see tiepoint and pixelscale in the <a href="http://geoexamples.com/d3-raster-tools-docs/">example</a>, and the GDAL metadata, in a special &quot;GDAL&quot; tag, which is not easy to find, although it is not when using python+GDAL.</p>
<h3 id="html-example">HTML example</h3>
<p><pre><code>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">></span>
<span class="token operator">&lt;</span>html<span class="token operator">></span>
    <span class="token operator">&lt;</span>meta<span class="token operator">></span>
    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">'geotiff.min.js'</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>meta<span class="token operator">></span>

<span class="token operator">&lt;</span>body<span class="token operator">></span><span class="token operator">&lt;</span>script<span class="token operator">></span>

<span class="token keyword">var</span> urlpath <span class="token operator">=</span>  <span class="token string">"vardah.tiff"</span>

<span class="token keyword">var</span> oReq <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
oReq<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"GET"</span><span class="token punctuation">,</span> urlpath<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
oReq<span class="token punctuation">.</span>responseType <span class="token operator">=</span> <span class="token string">"arraybuffer"</span><span class="token punctuation">;</span>

oReq<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">oEvent</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> t0 <span class="token operator">=</span> performance<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> tiff <span class="token operator">=</span> GeoTIFF<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> image <span class="token operator">=</span> tiff<span class="token punctuation">.</span><span class="token function">getImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> data <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token function">readRasters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> tiepoint <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token function">getTiePoints</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> pixelScale <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token function">getFileDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>ModelPixelScale<span class="token punctuation">;</span>
  <span class="token keyword">var</span> t1 <span class="token operator">=</span> performance<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Decoding took "</span> <span class="token operator">+</span> <span class="token punctuation">(</span>t1 <span class="token operator">-</span> t0<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" milliseconds."</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
oReq<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//start process</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>


</code></pre></p>
<ul>
<li>Note that the request must be set with an <em>arraybuffer</em> <em>responsetype</em></li>
</ul>
<h2 id="netcdf">NetCDF</h2>
<p>NetCDF is a popular format among meteorology data. The format is quite simple and very flexible. As in the case of GeoTIFF, GDAL can write NetCDF files with a special form and there is a <a href="https://github.com/cheminfo-js/netcdfjs">JavaScript library, netcdfjs</a> that reads the format and it&#39;s fast and not very big. It can be opened with QGIS if created with GDAL.</p>
<p>To create a NetCDF file from a GeoTIFF, just run:</p>
gdal_translate -of netCDF -b 1 vardah.tiff vardah.nc<p>The name of the output band will be <em>Band1</em>, which is not very nice, since the actual name is stored in another field, not the one used to retrieve the data.</p>
<h3 id="html-example-1">HTML example</h3>
<p><pre><code>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">></span>
<span class="token operator">&lt;</span>html<span class="token operator">></span>
    <span class="token operator">&lt;</span>meta<span class="token operator">></span>
    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">'netcdfjs.js'</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>meta<span class="token operator">></span>

<span class="token operator">&lt;</span>body<span class="token operator">></span><span class="token operator">&lt;</span>script<span class="token operator">></span>

<span class="token keyword">var</span> urlpath <span class="token operator">=</span>  <span class="token string">"vardah.nc"</span>
<span class="token keyword">var</span> reader<span class="token punctuation">;</span>

<span class="token keyword">var</span> oReq <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
oReq<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"GET"</span><span class="token punctuation">,</span> urlpath<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
oReq<span class="token punctuation">.</span>responseType <span class="token operator">=</span> <span class="token string">"blob"</span><span class="token punctuation">;</span>

oReq<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">oEvent</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> t0 <span class="token operator">=</span> performance<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
  <span class="token keyword">var</span> blob <span class="token operator">=</span> oReq<span class="token punctuation">.</span>response<span class="token punctuation">;</span>
  reader_url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  reader_url<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> t0 <span class="token operator">=</span> performance<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">netcdfjs</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> dataValues <span class="token operator">=</span> reader<span class="token punctuation">.</span><span class="token function">getDataVariable</span><span class="token punctuation">(</span><span class="token string">'Band1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> t1 <span class="token operator">=</span> performance<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Decoding took "</span> <span class="token operator">+</span> <span class="token punctuation">(</span>t1 <span class="token operator">-</span> t0<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" milliseconds."</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">var</span> arrayBuffer <span class="token operator">=</span> reader_url<span class="token punctuation">.</span><span class="token function">readAsArrayBuffer</span><span class="token punctuation">(</span>blob<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>
oReq<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//start process</span>


<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>


</code></pre></p>
<ul>
<li>The variables <em>lat</em> and <em>lon</em> return the geographical coordinates for every pixel, which is a good feature</li>
<li>Some metadata is stored in different variables and fields. Take a look to the library api to see them, but:<ul>
<li>Printing <em>reader.variables</em> will output a set ob objects with the projection information, longitudes and latitudes</li>
<li><em>reader.dimensions</em> stores the matrix size</li>
<li><em>globalAttributes</em> stores other metadata, such as the creation date, GDAL information, etc</li>
</ul>
</li>
<li>Note that the request must be set with a <em>blob</em> <em>responsetype</em></li>
</ul>
<h2 id="json">JSON</h2>
<p>This format is the first that comes in mind when thinking about sharing data. It&#39;s the easiest to understand, and reading it is the most simple thing to code. But it&#39;s a bad idea using it with medium sized matrices, since the size can be for times or more than the original uncompressed GeoTIFF.</p>
<h3 id="html-example-2">HTML example</h3>
<p><pre><code>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">></span>
<span class="token operator">&lt;</span>html<span class="token operator">></span>
    <span class="token operator">&lt;</span>body<span class="token operator">></span>

<span class="token operator">&lt;</span>script<span class="token operator">></span>

<span class="token keyword">var</span> oReq <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


oReq<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"load"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> t0 <span class="token operator">=</span> performance<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> jsonData <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> t1 <span class="token operator">=</span> performance<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Decoding took "</span> <span class="token operator">+</span> <span class="token punctuation">(</span>t1 <span class="token operator">-</span> t0<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" milliseconds."</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

oReq<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"GET"</span><span class="token punctuation">,</span> <span class="token string">"vardah.json"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
oReq<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>


</code></pre></p>
<ul>
<li>Just parse the JSON file!</li>
<li>Of course, all the metadata is easy to add, so the format is very flexible</li>
</ul>
<p>Creating the JSON sample file using python is easy:</p>
<p><pre><code>
<span class="token keyword">import</span> gdal
<span class="token keyword">import</span> json
from base64 <span class="token keyword">import</span> b64encode
<span class="token keyword">import</span> struct

d_s <span class="token operator">=</span> gdal<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token string">"vardah.tiff"</span><span class="token punctuation">)</span>
data <span class="token operator">=</span> d_s<span class="token punctuation">.</span><span class="token function">GetRasterBand</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ReadAsArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>dtype<span class="token punctuation">)</span>
out_data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"Size:"</span><span class="token punctuation">,</span> data<span class="token punctuation">.</span>shape<span class="token punctuation">)</span>
<span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token function">range</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token function">range</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>shape<span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">"http://geoexamples.com/d3-raster-tools-docs/"</span><span class="token operator">></span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span><span class="token punctuation">)</span><span class="token operator">:</span>
out_data<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token function">float</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

json_data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
json_data<span class="token punctuation">[</span><span class="token string">'nx'</span><span class="token punctuation">]</span><span class="token operator">=</span> data<span class="token punctuation">.</span>shape<span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">"http://geoexamples.com/d3-raster-tools-docs/"</span><span class="token operator">></span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>
json_data<span class="token punctuation">[</span><span class="token string">'ny'</span><span class="token punctuation">]</span><span class="token operator">=</span> data<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
json_data<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span> <span class="token operator">=</span> out_data

fp <span class="token operator">=</span> <span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"vardah.json"</span><span class="token punctuation">,</span> <span class="token string">"w"</span><span class="token punctuation">)</span>
fp<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>json<span class="token punctuation">.</span><span class="token function">dumps</span><span class="token punctuation">(</span>json_data<span class="token punctuation">)</span><span class="token punctuation">)</span>
fp<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre></p>
<ul>
<li>To make consistent data, put all the numbers in a list, but a matrix could be created the same way, and could be more convenient in certain cases</li>
</ul>
<h2 id="json-with-encoded-data">JSON with encoded data</h2>
<p>Plain JSON data is expensive in terms of space. What if we encode the data in <a href="https://en.wikipedia.org/wiki/Base64">Base64</a>? The data will be much smaller and the JSON format can store all the metadata we want with the same flexibility.</p>
<p>Let&#39;s look first at how can we create the sample file:</p>
<p><pre><code>
<span class="token keyword">import</span> gdal
<span class="token keyword">import</span> json
from base64 <span class="token keyword">import</span> b64encode
<span class="token keyword">import</span> struct

d_s <span class="token operator">=</span> gdal<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token string">"vardah.tiff"</span><span class="token punctuation">)</span>
data <span class="token operator">=</span> d_s<span class="token punctuation">.</span><span class="token function">GetRasterBand</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ReadAsArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>dtype<span class="token punctuation">)</span>
out_data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"Size:"</span><span class="token punctuation">,</span> data<span class="token punctuation">.</span>shape<span class="token punctuation">)</span>
<span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token function">range</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token function">range</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>shape<span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">"http://geoexamples.com/d3-raster-tools-docs/"</span><span class="token operator">></span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span><span class="token punctuation">)</span><span class="token operator">:</span>
out_data<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token function">float</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

json_data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
json_data<span class="token punctuation">[</span><span class="token string">'nx'</span><span class="token punctuation">]</span><span class="token operator">=</span> data<span class="token punctuation">.</span>shape<span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">"http://geoexamples.com/d3-raster-tools-docs/"</span><span class="token operator">></span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>
json_data<span class="token punctuation">[</span><span class="token string">'ny'</span><span class="token punctuation">]</span><span class="token operator">=</span> data<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>

b64 <span class="token operator">=</span> <span class="token function">b64encode</span><span class="token punctuation">(</span>struct<span class="token punctuation">.</span><span class="token function">pack</span><span class="token punctuation">(</span><span class="token function">str</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>out_data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">'f'</span><span class="token punctuation">,</span> <span class="token operator">*</span>out_data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span>

json_data<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span> <span class="token operator">=</span> b64
fp <span class="token operator">=</span> <span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"vardahb64.json"</span><span class="token punctuation">,</span> <span class="token string">"w"</span><span class="token punctuation">)</span>
fp<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>json<span class="token punctuation">.</span><span class="token function">dumps</span><span class="token punctuation">(</span>json_data<span class="token punctuation">)</span><span class="token punctuation">)</span>
fp<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></p>
<ul>
<li>Just encode the list after packing it as a binary string<ul>
<li>I have packed the elements using a <em>f</em>, so as float32 values. If this is changed, remember to change the decoding part! Some variables such as classifications can be stored as bytes, which is much more efficient</li>
<li>The <em>b64encode</em> function returns in bytes, so it has to be encoded to utf-8 to serialize it into a JSON</li>
</ul>
</li>
</ul>
<h3 id="html-example-3">HTML example</h3>
<p><pre><code>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">></span>
<span class="token operator">&lt;</span>html<span class="token operator">></span>
    <span class="token operator">&lt;</span>body<span class="token operator">></span>

<span class="token operator">&lt;</span>script<span class="token operator">></span>

<span class="token keyword">var</span> oReq <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


oReq<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"load"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> t0 <span class="token operator">=</span> performance<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> jsonData <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token function">atob</span><span class="token punctuation">(</span>jsonData<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span>
            data<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> String<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> float32Data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Float32Array</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> t1 <span class="token operator">=</span> performance<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Decoding took "</span> <span class="token operator">+</span> <span class="token punctuation">(</span>t1 <span class="token operator">-</span> t0<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" milliseconds."</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

oReq<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"GET"</span><span class="token punctuation">,</span> <span class="token string">"vardahb64.json"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
oReq<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>


</code></pre></p>
<p>Reading this data is quite efficient, but not as easy as plain JSON. The steps are:</p>
<ul>
<li>Parse the JSON data with the <em>JSON.parse</em> function</li>
<li>Convert the encoded field to a binary string using the <em>atob</em> function. This decodes the <em>base64 string</em></li>
<li>Retrieve all the bytes<ul>
<li>By splitting all the chars in the string, map all the characters to the UTF-16 codes using <em>String.charCodeAt</em></li>
<li>Put all the values to a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Typed_arrays">JavaScript typed array</a>, so we can convert them later</li>
</ul>
</li>
<li>Since the values were stored as float32, we create a <em>buffer</em> from the unigned int8 array and convert the types. That&#39;s all</li>
</ul>
<h2 id="binary-data">Binary data</h2>
<p>Using binary data directly can be a bit more difficult, but the size is compact, the format is very flexible and the performance is very good. Also, it doesn&#39;t require any external library, which is very convenient in many cases. And since you control all the format, the original data can be obfuscated easily.</p>
<p>If we want to store metadata, different data types may be involved, making the scripts more complicated, but it&#39;s efficient and not so difficult to do.</p>
<p>Creating the file is easy:</p>
<p><pre><code>
<span class="token keyword">import</span> gdal
<span class="token keyword">import</span> struct

d_s <span class="token operator">=</span> gdal<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token string">"vardah.tiff"</span><span class="token punctuation">)</span>
data <span class="token operator">=</span> d_s<span class="token punctuation">.</span><span class="token function">GetRasterBand</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ReadAsArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>dtype<span class="token punctuation">)</span>
out_data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

<span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token function">range</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token function">range</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>shape<span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">"http://geoexamples.com/d3-raster-tools-docs/"</span><span class="token operator">></span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span><span class="token punctuation">)</span><span class="token operator">:</span>
out_data<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token function">float</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

fp <span class="token operator">=</span> <span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"vardah.bin"</span><span class="token punctuation">,</span> <span class="token string">"wb"</span><span class="token punctuation">)</span>
fp<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>struct<span class="token punctuation">.</span><span class="token function">pack</span><span class="token punctuation">(</span><span class="token function">str</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>out_data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">'f'</span><span class="token punctuation">,</span> <span class="token operator">*</span>out_data<span class="token punctuation">)</span><span class="token punctuation">)</span>
fp<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></p>
<ul>
<li>Just use the <em>pack</em> function to store the data<ul>
<li>Note that the data is packed with the <em>f</em> letter, this is as float32 elements</li>
</ul>
</li>
</ul>
<h3 id="html-example-4">HTML example</h3>
<p>Reading the binary data is really easy using <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Typed_arrays">Javascript typed arrays</a>:
<pre><code>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">></span>
<span class="token operator">&lt;</span>html<span class="token operator">></span>
    <span class="token operator">&lt;</span>body<span class="token operator">></span>
<span class="token operator">&lt;</span>script<span class="token operator">></span>
<span class="token keyword">var</span> oReq <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


oReq<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"load"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token keyword">var</span> t0 <span class="token operator">=</span> performance<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">&lt;</span>br<span class="token operator">></span> <span class="token keyword">var</span> floatArray<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Float32Array</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> t1 <span class="token operator">=</span> performance<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Decoding took "</span> <span class="token operator">+</span> <span class="token punctuation">(</span>t1 <span class="token operator">-</span> t0<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" milliseconds."</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

oReq<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"GET"</span><span class="token punctuation">,</span> <span class="token string">"vardah.bin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
oReq<span class="token punctuation">.</span>responseType <span class="token operator">=</span> <span class="token string">'arraybuffer'</span><span class="token punctuation">;</span>
oReq<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
</code></pre></p>
<ul>
<li>Note that the request must be set with an <em>arraybuffer</em> <em>responsetype</em></li>
<li>Just read the responsa into a new Float32Array. All the values will be there</li>
</ul>
<h2 id="lzw-compressed-binary-data">LZW compressed binary data</h2>
<p>Of course, as in the <a href="#geotiff">GeoTIFF</a> case, all the data can be compressed. Using complex compression algorithms makes you lose the advantage of coding everything without an external library, but the <a href="https://en.wikipedia.org/wiki/Lempel%E2%80%93Ziv%E2%80%93Welch">LZW algorithm</a> is so simple that it can be added with a few lines of code.</p>
<p>I will use the code sample from the <a href="https://rosettacode.org/wiki/LZW_compression">rossetacode.org site</a>.</p>
<h3 id="file-creation-using-python">File creation using Python</h3>
<p><pre><code>
<span class="token keyword">import</span> gdal
<span class="token keyword">import</span> struct
from base64 <span class="token keyword">import</span> b64encode

<span class="token string">''</span>'
Compression algorithm
<span class="token string">''</span>'
def <span class="token function">compress</span><span class="token punctuation">(</span>uncompressed<span class="token punctuation">)</span><span class="token operator">:</span>
<span class="token string">""</span><span class="token string">"Compress a string to a list of output symbols."</span><span class="token string">""</span>
# Build the dictionary<span class="token punctuation">.</span>
dict_size <span class="token operator">=</span> <span class="token number">256</span>
dictionary <span class="token operator">=</span> <span class="token function">dict</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">chr</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token function">xrange</span><span class="token punctuation">(</span>dict_size<span class="token punctuation">)</span><span class="token punctuation">)</span>

w <span class="token operator">=</span> <span class="token string">""</span>
result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> c <span class="token keyword">in</span> uncompressed<span class="token operator">:</span>
    wc <span class="token operator">=</span> w <span class="token operator">+</span> c
    <span class="token keyword">if</span> wc <span class="token keyword">in</span> dictionary<span class="token operator">:</span>
        w <span class="token operator">=</span> wc
    <span class="token keyword">else</span><span class="token operator">:</span>
        result<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>dictionary<span class="token punctuation">[</span>w<span class="token punctuation">]</span><span class="token punctuation">)</span>
        # Add wc to the dictionary<span class="token punctuation">.</span>
        dictionary<span class="token punctuation">[</span>wc<span class="token punctuation">]</span> <span class="token operator">=</span> dict_size
        dict_size <span class="token operator">+=</span> <span class="token number">1</span>
        w <span class="token operator">=</span> c

# Output the code <span class="token keyword">for</span> w<span class="token punctuation">.</span>
<span class="token keyword">if</span> w<span class="token operator">:</span>
    result<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>dictionary<span class="token punctuation">[</span>w<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">return</span> result
d_s <span class="token operator">=</span> gdal<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token string">"vardah.tiff"</span><span class="token punctuation">)</span>
data <span class="token operator">=</span> d_s<span class="token punctuation">.</span><span class="token function">GetRasterBand</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ReadAsArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

out_data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token function">range</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token function">range</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>shape<span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">"http://geoexamples.com/d3-raster-tools-docs/"</span><span class="token operator">></span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span><span class="token punctuation">)</span><span class="token operator">:</span>
out_data<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token function">float</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
out_data_bytes <span class="token operator">=</span> struct<span class="token punctuation">.</span><span class="token function">pack</span><span class="token punctuation">(</span><span class="token function">str</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>out_data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">'f'</span><span class="token punctuation">,</span> <span class="token operator">*</span>out_data<span class="token punctuation">)</span>
compressed <span class="token operator">=</span> <span class="token function">compress</span><span class="token punctuation">(</span>out_data_bytes<span class="token punctuation">)</span>

fp <span class="token operator">=</span> <span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"vardah.lzw.bin"</span><span class="token punctuation">,</span> <span class="token string">"wb"</span><span class="token punctuation">)</span>
fp<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>struct<span class="token punctuation">.</span><span class="token function">pack</span><span class="token punctuation">(</span><span class="token function">str</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>compressed<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">'H'</span><span class="token punctuation">,</span> <span class="token operator">*</span>compressed<span class="token punctuation">)</span><span class="token punctuation">)</span>
fp<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></p>
<ul>
<li>The compression function is copied directly from the <a href="https://rosettacode.org/wiki/LZW_compression">rossetacode.org site</a><ul>
<li>It&#39;s supposed to work with a string, so we will convert out floats list into a binary bytes string</li>
</ul>
</li>
<li><em>pack</em> will convert the data list into a string with the binary data. The compressed data will be byte by byte</li>
<li>The data is compressed with the function</li>
<li>The data is written as a string of unsigned shorts. This is because the compressed data is a list with values from 0 to 65535, so the <em>unsigned short</em> will be the most efficient way to store its values</li>
</ul>
<p>The size is reduced by 50% in our example. If a classification is used instead of float values, the compression will be much more efficient.</p>
<p>If using python3, the <em>compress</em> function would be:
<pre><code>
def <span class="token function">compress</span><span class="token punctuation">(</span>uncompressed<span class="token punctuation">)</span><span class="token operator">:</span>
<span class="token string">""</span><span class="token string">"Compress a string to a list of output symbols."</span><span class="token string">""</span>
# Build the dictionary<span class="token punctuation">.</span>
dict_size <span class="token operator">=</span> <span class="token number">256</span>
dictionary <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token function">bytes</span><span class="token punctuation">(</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> i <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token function">range</span><span class="token punctuation">(</span>dict_size<span class="token punctuation">)</span><span class="token punctuation">}</span>
w <span class="token operator">=</span> b<span class="token string">""</span>
result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> c <span class="token keyword">in</span> uncompressed<span class="token operator">:</span>
    <span class="token function">#print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span>w<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">type</span><span class="token punctuation">(</span><span class="token function">bytes</span><span class="token punctuation">(</span><span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> c<span class="token punctuation">,</span> <span class="token function">bytes</span><span class="token punctuation">(</span><span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    wc <span class="token operator">=</span> w <span class="token operator">+</span> <span class="token function">bytes</span><span class="token punctuation">(</span><span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> wc <span class="token keyword">in</span> dictionary<span class="token operator">:</span>
        w <span class="token operator">=</span> wc
    <span class="token keyword">else</span><span class="token operator">:</span>
        result<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>dictionary<span class="token punctuation">[</span>w<span class="token punctuation">]</span><span class="token punctuation">)</span>
        # Add wc to the dictionary<span class="token punctuation">.</span>
        dictionary<span class="token punctuation">[</span>wc<span class="token punctuation">]</span> <span class="token operator">=</span> dict_size
        dict_size <span class="token operator">+=</span> <span class="token number">1</span>
        w <span class="token operator">=</span> <span class="token function">bytes</span><span class="token punctuation">(</span><span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">)</span>

# Output the code <span class="token keyword">for</span> w<span class="token punctuation">.</span>
<span class="token keyword">if</span> w<span class="token operator">:</span>
    result<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>dictionary<span class="token punctuation">[</span>w<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">return</span> result
</code></pre></p>
<ul>
<li><em>str</em> vars in python 2 become <em>bytes</em> in python3, so everything has to be adapted</li>
<li><em>xrange</em> has to be changed to <em>range</em></li>
</ul>
<h3 id="html-example-5">HTML example</h3>
<p><pre><code>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">></span>
<span class="token operator">&lt;</span>html<span class="token operator">></span>
    <span class="token operator">&lt;</span>body<span class="token operator">></span>
<span class="token operator">&lt;</span>script<span class="token operator">></span>
<span class="token keyword">var</span> oReq <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


oReq<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"load"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token keyword">var</span> t0 <span class="token operator">=</span> performance<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">&lt;</span>br<span class="token operator">></span> <span class="token keyword">var</span> compressedArray <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint16Array</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>compressedArray<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> uncompressed <span class="token operator">=</span> <span class="token function">uncompress</span><span class="token punctuation">(</span>compressedArray<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> t1 <span class="token operator">=</span> performance<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Decoding took "</span> <span class="token operator">+</span> <span class="token punctuation">(</span>t1 <span class="token operator">-</span> t0<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" milliseconds."</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

oReq<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"GET"</span><span class="token punctuation">,</span> <span class="token string">"vardah.lzw.bin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
oReq<span class="token punctuation">.</span>responseType <span class="token operator">=</span> <span class="token string">'arraybuffer'</span><span class="token punctuation">;</span>
oReq<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//&lt;a href="https://rosettacode.org/wiki/LZW_compression#JavaScript">https://rosettacode.org/wiki/LZW_compression#JavaScript&lt;/a></span>
<span class="token keyword">function</span> <span class="token function">uncompress</span><span class="token punctuation">(</span><span class="token parameter">compressed</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">var</span> i<span class="token punctuation">,</span>
dictionary <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
w<span class="token punctuation">,</span>
result<span class="token punctuation">,</span>
floatResult <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
k<span class="token punctuation">,</span>
entry <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span>
dictSize <span class="token operator">=</span> <span class="token number">256</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">256</span><span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
dictionary<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
    w <span class="token operator">=</span> String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span>compressed<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    result <span class="token operator">=</span> w<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> compressed<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        k <span class="token operator">=</span> compressed<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>dictionary<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            entry <span class="token operator">=</span> dictionary<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>k <span class="token operator">===</span> dictSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                entry <span class="token operator">=</span> w <span class="token operator">+</span> w<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
         result <span class="token operator">+=</span> entry<span class="token punctuation">;</span>

        <span class="token comment">// Add w+entry[0] to the dictionary.</span>
        dictionary<span class="token punctuation">[</span>dictSize<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> w <span class="token operator">+</span> entry<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        w <span class="token operator">=</span> entry<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//Convert from chars to float32 array</span>
    <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span>
        result<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> String<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Float32Array</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
</code></pre></p>
<ul>
<li>As in the other cases, just cll the <em>uncompress</em> function and the float array data will be in the variable</li>
<li>The <em>uncompress</em> function it the same of the one at the <a href="https://rosettacode.org/wiki/LZW_compression">rossetacode.org site</a>, but modified to convert the bytes string to a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Typed_arrays">Float32Array</a><ul>
<li>By splitting all the chars in the string, map all the characters to the <em>UTF-16 codes</em> using <em>String.charCodeAt</em></li>
<li>Put all the values to a <em>Uint8Array</em> JavaScript typed array, so we can convert them later</li>
<li>The unsigned short array is then converted to a <em>Float32Array</em> using buffers</li>
</ul>
</li>
</ul>
<p>Not so difficult! If some metadata has to be added, things can be a bit more complicated, specially if different types are involved</p>
<h2 id="performance-comparison">Performance comparison</h2>
<p>I run all the options so it&#39;s easy to compare the final file size and the time it takes to parse</p>
<table>
<thead>
<tr>
<th>Format</th>
<th align="center">Size</th>
<th align="right">Parsing time</th>
</tr>
</thead>
<tbody><tr>
<td>Uncompressed GeoTIFF</td>
<td align="center">102 kB</td>
<td align="right">20 ms</td>
</tr>
<tr>
<td>Packbits GeoTIFF</td>
<td align="center">103 kB</td>
<td align="right">80 ms</td>
</tr>
<tr>
<td>LZW GeoTIFF</td>
<td align="center">53 kB</td>
<td align="right">54 ms</td>
</tr>
<tr>
<td>Deflate GeoTIFF</td>
<td align="center">40 kB</td>
<td align="right">59 ms</td>
</tr>
<tr>
<td>JSON</td>
<td align="center">490 kB</td>
<td align="right">9 ms</td>
</tr>
<tr>
<td>Base64 JSON</td>
<td align="center">135 kB</td>
<td align="right">12 ms</td>
</tr>
<tr>
<td>Binary</td>
<td align="center">101 kB</td>
<td align="right">0.15 ms</td>
</tr>
<tr>
<td>LZW binary</td>
<td align="center">54 kB</td>
<td align="right">14 ms</td>
</tr>
</tbody></table>
<ul>
<li>GeoTIFF files, specially if compressed, are the smallest ones, but with the higher parsing time. Anyway, 60ms is a very good time, so it will be the usual method</li>
<li>JSON files are the most inefficient in terms of space, and the parsing time is not as low as it could be, because there are many characters to parse</li>
<li>Binary files are really fast to parse, and the size is quite small if compressed</li>
</ul>
<h2 id="what-to-do-with-all-this-binary-data">What to do with all this binary data?</h2>
<p>With the html canvas element and some libraries around there, many visualizations can be done with a point matrix. I made a tutorial some time ago: <a href="http://geoexamples.com/d3-raster-tools-docs/">d3-raster-tools-docs</a></p>
<h2 id="links">Links</h2>
<ul>
<li><a href="http://geoexamples.com/d3-raster-tools-docs/">drawing raster data with d3js</a></li>
<li><a href="http://bl.ocks.org/rveciana/420a33fd0963e2a6aad16da54725af36">Vardah and leaflet block</a></li>
<li><a href="http://geoexamples.com/d3-raster-tools-docs/code_samples/vardah.html">Generating the Vardah data file</a></li>
<li><a href="http://bl.ocks.org/rveciana/raw/420a33fd0963e2a6aad16da54725af36/vardah.tiff">The original geotiff file</a></li>
<li><a href="https://github.com/constantinius/geotiff.js">The geotiff.js library</a></li>
<li><a href="https://github.com/cheminfo-js/netcdfjs">The netcdfjs library</a></li>
<li><a href="https://en.wikipedia.org/wiki/Base64">Base64 Wikipedia page</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Typed_arrays">JavaScript typed arrays</a></li>
<li><a href="https://en.wikipedia.org/wiki/Lempel%E2%80%93Ziv%E2%80%93Welch">LZW algorithm wikipedia page</a></li>
<li><a href="https://rosettacode.org/wiki/LZW_compression">LZW implementation in many languages, including Python and JavaScript</a></li>
<li><a href="http://geoexamples.com/d3-raster-tools-docs/">D3js raster tools documentation</a></li>
</ul>
<!-- HTML_TAG_END --></article></div></div></main>
<footer class="site-footer"><div class="wrapper"><div class="footer-col-wrapper"><div class="footer-col  footer-col-1"><ul class="contact-list"><li>GeoExamples - Roger Veciana</li></ul></div>

	<div class="footer-col  footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/rveciana"><span class="icon  icon--github"><svg viewBox="0 0 16 16"><path fill="#89b889" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"></path></svg></span>

						<span class="username">rveciana</span></a></li>

			<li><a href="https://twitter.com/rveciana"><span class="icon  icon--twitter"><svg viewBox="0 0 16 16"><path fill="#89b889" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809
                    c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"></path></svg></span>

						<span class="username">rveciana</span></a></li>
			<li><a href="https://www.linkedin.com/in/rogerveciana"><span class="icon  icon--twitter"><svg width="16" height="15.28958"><path d="M 0,1.77606 Q 0,1.00386 0.54054,0.50193 1.08108,0 1.94595,0 2.79537,0 3.32047,0.49421 3.86101,1.00386 3.86101,1.8224 q 0,0.74131 -0.5251,1.23552 -0.54054,0.50965 -1.42085,0.50965 l -0.0154,0 q -0.84942,0 -1.37452,-0.50965 Q 4e-5,2.54827 4e-5,1.77606 Z m 0.20078,13.51352 0,-10.3166 3.42857,0 0,10.3166 -3.42857,0 z m 5.32818,0 3.42857,0 0,-5.76062 q 0,-0.54054 0.12355,-0.83398 0.21622,-0.52509 0.65638,-0.88803 0.44015,-0.36293 1.10424,-0.36293 1.72973,0 1.72973,2.33205 l 0,5.51351 3.42857,0 0,-5.91506 Q 16,7.08881 14.91892,5.90734 13.83784,4.72587 12.06178,4.72587 q -1.99228,0 -3.10425,1.71429 l 0,0.0309 -0.0154,0 0.0154,-0.0309 0,-1.46718 -3.42857,0 q 0.0309,0.49421 0.0309,3.07336 0,2.57915 -0.0309,7.24324 z"></path></svg></span>

						<span class="username">rogerveciana</span></a></li></ul></div>

	<div class="footer-col  footer-col-3"><p class="text">I am a software developer and meteorologist who likes mapping. I put here the things I learn on my free time.</p>
		<p class="text">Roger Veciana i Rovira</p></div></div></div></footer>



	<script type="application/json" data-type="svelte-data" data-url="/summary_pages.json">{"status":200,"statusText":"","headers":{"content-type":"application/json; charset=utf-8"},"body":"[{\"title\":\"About\",\"permalink\":\"\u002Fabout\",\"excerpt\":\"\u003Cp\u003E{{ site.author.name }}\u003C\u002Fp\u003E\"},{\"title\":\"CV\",\"permalink\":\"\u002Fcv\",\"excerpt\":\"\u003Ch2 id=\\\"jobs\\\"\u003EJobs\u003C\u002Fh2\u003E\",\"avoidMainMenu\":true},{\"title\":\"Projects\",\"permalink\":\"\u002Fprojects\",\"excerpt\":\"\u003Cp\u003ESome of my personal projects:\u003C\u002Fp\u003E\"}]"}</script>

	<script type="application/json" data-type="svelte-data" data-url="raster-file-formats.html.json">{"status":200,"statusText":"","headers":{"content-type":"application/json; charset=utf-8"},"body":"{\"title\":\"Raster file formats for JavaScript mapping\",\"contents\":\"\u003Cp\u003ESome time ago, I made some docs about \u003Ca href=\\\"http:\u002F\u002Fgeoexamples.com\u002Fd3-raster-tools-docs\u002F\\\"\u003Edrawing raster data with d3js\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\\n\u003Cp\u003EAll the examples GeoTIFF files to get the data, but there are many other possibilities. I&#39;ve made the exercice to create some examples using the same dataset but different strategies for creating the data with different formats.\u003C\u002Fp\u003E\\n\u003Ch2 id=\\\"table-of-contents\\\"\u003ETable of contents\u003C\u002Fh2\u003E\\n\u003Cul\u003E\\n\u003Cli\u003E\u003Ca href=\\\"#the-data\\\"\u003EThe data\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"#geotiff\\\"\u003EGeoTIFF\u003C\u002Fa\u003E\u003Cul\u003E\\n\u003Cli\u003E\u003Ca href=\\\"#compression\\\"\u003ECompression\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"#html-example\\\"\u003EHTML example\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"#netcdf\\\"\u003ENetCDF\u003C\u002Fa\u003E\u003Cul\u003E\\n\u003Cli\u003E\u003Ca href=\\\"#html-example-1\\\"\u003EHTML example\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"#json\\\"\u003EJSON\u003C\u002Fa\u003E\u003Cul\u003E\\n\u003Cli\u003E\u003Ca href=\\\"#html-example-2\\\"\u003EHTML example\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"#json-with-encoded-data\\\"\u003EJSON with encoded data\u003C\u002Fa\u003E\u003Cul\u003E\\n\u003Cli\u003E\u003Ca href=\\\"#html-example-3\\\"\u003EHTML example\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"#binary-data\\\"\u003EBinary data\u003C\u002Fa\u003E\u003Cul\u003E\\n\u003Cli\u003E\u003Ca href=\\\"#html-example-4\\\"\u003EHTML example\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"#lzw-compressed-binary-data\\\"\u003ELZW compressed binary data\u003C\u002Fa\u003E\u003Cul\u003E\\n\u003Cli\u003E\u003Ca href=\\\"#file-creation-using-python\\\"\u003EFile creation using Python\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"#html-example-5\\\"\u003EHTML example\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"#performance-comparison\\\"\u003EPerformance comparison\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"#what-to-do-with-all-this-binary-data\\\"\u003EWhat to do with all this binary data?\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"#links\\\"\u003ELinks\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003Ch2 id=\\\"the-data\\\"\u003EThe data\u003C\u002Fh2\u003E\\n\u003Cp\u003EAll the examples use the data from \u003Ca href=\\\"http:\u002F\u002Fbl.ocks.org\u002Frveciana\u002F420a33fd0963e2a6aad16da54725af36\\\"\u003Ethis block\u003C\u002Fa\u003E. You can see \u003Ca href=\\\"http:\u002F\u002Fgeoexamples.com\u002Fd3-raster-tools-docs\u002Fcode_samples\u002Fvardah.html\\\"\u003Ehow I got the data here\u003C\u002Fa\u003E. I have taken only the first layer (msl pressure) to make the examples simpler:\u003C\u002Fp\u003E\\ngdal_translate -b 1 vardah.tiff vardah_new.tiff\u003Cp\u003EYou can \u003Ca href=\\\"http:\u002F\u002Fbl.ocks.org\u002Frveciana\u002Fraw\u002F420a33fd0963e2a6aad16da54725af36\u002Fvardah.tiff\\\"\u003Edownload here\u003C\u002Fa\u003E the original \u003Ca href=\\\"http:\u002F\u002Fbl.ocks.org\u002Frveciana\u002Fraw\u002F420a33fd0963e2a6aad16da54725af36\u002Fvardah.tiff\\\"\u003Evardah.tiff\u003C\u002Fa\u003E file.\u003C\u002Fp\u003E\\n\u003Ch2 id=\\\"geotiff\\\"\u003EGeoTIFF\u003C\u002Fh2\u003E\\n\u003Cp\u003EAs in the original example, GeoTIFF can be used as a way to get the raster data. It&#39;s got many advantages, such as being the most widespread format, able to be compressed, that it&#39;s possible to open it directly with any GIS program such as QGIS.\u003C\u002Fp\u003E\\n\u003Cp\u003ETo use it, use the \u003Ca href=\\\"https:\u002F\u002Fgithub.com\u002Fconstantinius\u002Fgeotiff.js\\\"\u003Egeotiff.js library\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\\n\u003Ch3 id=\\\"compression\\\"\u003ECompression\u003C\u002Fh3\u003E\\n\u003Cp\u003EThe compressed images are read directly by the latest versions of the library. The compression can reduce the size a lot, specially with the \u003Cem\u003EDeflate\u003C\u002Fem\u003E option. The parsing time is bigger when the image is compressed, but the time is acceptable.\u003C\u002Fp\u003E\\n\u003Cp\u003ETo create a compressed GeoTIFF file, use the gdal creation options:\u003C\u002Fp\u003E\\ngdal_translate -of GTiff -co COMPRESS=DEFLATE vardah.tiff vardah2.tiff\\ngdal_translate -of GTiff -co COMPRESS=LZW vardah.tiff vardah2.tiff\\ngdal_translate -of GTiff -co COMPRESS=PACKBITS vardah.tiff vardah2.tiff\u003Cp\u003EOther compression options are not available with the geotiffjs library.\u003C\u002Fp\u003E\\n\u003Cp\u003EAnother thing to take in account is the metadata. The geotransform data is stored in a quite strange way (see tiepoint and pixelscale in the \u003Ca href=\\\"http:\u002F\u002Fgeoexamples.com\u002Fd3-raster-tools-docs\u002F\\\"\u003Eexample\u003C\u002Fa\u003E, and the GDAL metadata, in a special &quot;GDAL&quot; tag, which is not easy to find, although it is not when using python+GDAL.\u003C\u002Fp\u003E\\n\u003Ch3 id=\\\"html-example\\\"\u003EHTML example\u003C\u002Fh3\u003E\\n\u003Cp\u003E\u003Cpre\u003E\u003Ccode\u003E\\n\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E!\u003C\u002Fspan\u003E\u003Cspan class=\\\"token constant\\\"\u003EDOCTYPE\u003C\u002Fspan\u003E html\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003Ehtml\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003Emeta\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003Escript src\u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E'geotiff.min.js'\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E\u002F\u003C\u002Fspan\u003Escript\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E\u002F\u003C\u002Fspan\u003Emeta\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003Ebody\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003Escript\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"token keyword\\\"\u003Evar\u003C\u002Fspan\u003E urlpath \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E  \u003Cspan class=\\\"token string\\\"\u003E\\\"vardah.tiff\\\"\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"token keyword\\\"\u003Evar\u003C\u002Fspan\u003E oReq \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\\\"token class-name\\\"\u003EXMLHttpRequest\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\noReq\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Eopen\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"GET\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E urlpath\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token boolean\\\"\u003Etrue\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\noReq\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003EresponseType \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token string\\\"\u003E\\\"arraybuffer\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\\noReq\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function-variable function\\\"\u003Eonload\u003C\u002Fspan\u003E \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token parameter\\\"\u003EoEvent\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E{\u003C\u002Fspan\u003E\\n  \u003Cspan class=\\\"token keyword\\\"\u003Evar\u003C\u002Fspan\u003E t0 \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E performance\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Enow\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n  \u003Cspan class=\\\"token keyword\\\"\u003Evar\u003C\u002Fspan\u003E tiff \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E GeoTIFF\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Eparse\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token keyword\\\"\u003Ethis\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003Eresponse\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n  \u003Cspan class=\\\"token keyword\\\"\u003Evar\u003C\u002Fspan\u003E image \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E tiff\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EgetImage\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n  \u003Cspan class=\\\"token keyword\\\"\u003Evar\u003C\u002Fspan\u003E data \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E image\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EreadRasters\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n  \u003Cspan class=\\\"token keyword\\\"\u003Evar\u003C\u002Fspan\u003E tiepoint \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E image\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EgetTiePoints\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n  \u003Cspan class=\\\"token keyword\\\"\u003Evar\u003C\u002Fspan\u003E pixelScale \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E image\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EgetFileDirectory\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003EModelPixelScale\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n  \u003Cspan class=\\\"token keyword\\\"\u003Evar\u003C\u002Fspan\u003E t1 \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E performance\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Enow\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n  console\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"Decoding took \\\"\u003C\u002Fspan\u003E \u003Cspan class=\\\"token operator\\\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Et1 \u003Cspan class=\\\"token operator\\\"\u003E-\u003C\u002Fspan\u003E t0\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\\\"token operator\\\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\\\"token string\\\"\u003E\\\" milliseconds.\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token punctuation\\\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\noReq\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Esend\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\\\"token comment\\\"\u003E\u002F\u002Fstart process\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E\u002F\u003C\u002Fspan\u003Escript\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\\n\\n\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fp\u003E\\n\u003Cul\u003E\\n\u003Cli\u003ENote that the request must be set with an \u003Cem\u003Earraybuffer\u003C\u002Fem\u003E \u003Cem\u003Eresponsetype\u003C\u002Fem\u003E\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003Ch2 id=\\\"netcdf\\\"\u003ENetCDF\u003C\u002Fh2\u003E\\n\u003Cp\u003ENetCDF is a popular format among meteorology data. The format is quite simple and very flexible. As in the case of GeoTIFF, GDAL can write NetCDF files with a special form and there is a \u003Ca href=\\\"https:\u002F\u002Fgithub.com\u002Fcheminfo-js\u002Fnetcdfjs\\\"\u003EJavaScript library, netcdfjs\u003C\u002Fa\u003E that reads the format and it&#39;s fast and not very big. It can be opened with QGIS if created with GDAL.\u003C\u002Fp\u003E\\n\u003Cp\u003ETo create a NetCDF file from a GeoTIFF, just run:\u003C\u002Fp\u003E\\ngdal_translate -of netCDF -b 1 vardah.tiff vardah.nc\u003Cp\u003EThe name of the output band will be \u003Cem\u003EBand1\u003C\u002Fem\u003E, which is not very nice, since the actual name is stored in another field, not the one used to retrieve the data.\u003C\u002Fp\u003E\\n\u003Ch3 id=\\\"html-example-1\\\"\u003EHTML example\u003C\u002Fh3\u003E\\n\u003Cp\u003E\u003Cpre\u003E\u003Ccode\u003E\\n\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E!\u003C\u002Fspan\u003E\u003Cspan class=\\\"token constant\\\"\u003EDOCTYPE\u003C\u002Fspan\u003E html\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003Ehtml\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003Emeta\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003Escript src\u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E'netcdfjs.js'\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E\u002F\u003C\u002Fspan\u003Escript\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E\u002F\u003C\u002Fspan\u003Emeta\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003Ebody\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003Escript\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"token keyword\\\"\u003Evar\u003C\u002Fspan\u003E urlpath \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E  \u003Cspan class=\\\"token string\\\"\u003E\\\"vardah.nc\\\"\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Evar\u003C\u002Fspan\u003E reader\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"token keyword\\\"\u003Evar\u003C\u002Fspan\u003E oReq \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\\\"token class-name\\\"\u003EXMLHttpRequest\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\noReq\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Eopen\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"GET\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E urlpath\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token boolean\\\"\u003Etrue\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\noReq\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003EresponseType \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token string\\\"\u003E\\\"blob\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\\noReq\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function-variable function\\\"\u003Eonload\u003C\u002Fspan\u003E \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token parameter\\\"\u003EoEvent\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E{\u003C\u002Fspan\u003E\\n  \u003Cspan class=\\\"token keyword\\\"\u003Evar\u003C\u002Fspan\u003E t0 \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E performance\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Enow\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E    \\n  \u003Cspan class=\\\"token keyword\\\"\u003Evar\u003C\u002Fspan\u003E blob \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E oReq\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003Eresponse\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n  reader_url \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\\\"token class-name\\\"\u003EFileReader\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\\n  reader_url\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function-variable function\\\"\u003Eonload\u003C\u002Fspan\u003E \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token parameter\\\"\u003Ee\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E{\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"token keyword\\\"\u003Evar\u003C\u002Fspan\u003E t0 \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E performance\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Enow\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n    reader \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\\\"token class-name\\\"\u003Enetcdfjs\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token keyword\\\"\u003Ethis\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003Eresult\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"token keyword\\\"\u003Evar\u003C\u002Fspan\u003E dataValues \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E reader\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EgetDataVariable\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E'Band1'\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"token keyword\\\"\u003Evar\u003C\u002Fspan\u003E t1 \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E performance\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Enow\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n    console\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"Decoding took \\\"\u003C\u002Fspan\u003E \u003Cspan class=\\\"token operator\\\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Et1 \u003Cspan class=\\\"token operator\\\"\u003E-\u003C\u002Fspan\u003E t0\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\\\"token operator\\\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\\\"token string\\\"\u003E\\\" milliseconds.\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\n  \u003Cspan class=\\\"token punctuation\\\"\u003E}\u003C\u002Fspan\u003E\\n\\n  \u003Cspan class=\\\"token keyword\\\"\u003Evar\u003C\u002Fspan\u003E arrayBuffer \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E reader_url\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EreadAsArrayBuffer\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Eblob\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"token punctuation\\\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\noReq\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Esend\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\\\"token comment\\\"\u003E\u002F\u002Fstart process\u003C\u002Fspan\u003E\\n\\n\\n\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E\u002F\u003C\u002Fspan\u003Escript\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\\n\\n\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fp\u003E\\n\u003Cul\u003E\\n\u003Cli\u003EThe variables \u003Cem\u003Elat\u003C\u002Fem\u003E and \u003Cem\u003Elon\u003C\u002Fem\u003E return the geographical coordinates for every pixel, which is a good feature\u003C\u002Fli\u003E\\n\u003Cli\u003ESome metadata is stored in different variables and fields. Take a look to the library api to see them, but:\u003Cul\u003E\\n\u003Cli\u003EPrinting \u003Cem\u003Ereader.variables\u003C\u002Fem\u003E will output a set ob objects with the projection information, longitudes and latitudes\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Cem\u003Ereader.dimensions\u003C\u002Fem\u003E stores the matrix size\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Cem\u003EglobalAttributes\u003C\u002Fem\u003E stores other metadata, such as the creation date, GDAL information, etc\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003C\u002Fli\u003E\\n\u003Cli\u003ENote that the request must be set with a \u003Cem\u003Eblob\u003C\u002Fem\u003E \u003Cem\u003Eresponsetype\u003C\u002Fem\u003E\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003Ch2 id=\\\"json\\\"\u003EJSON\u003C\u002Fh2\u003E\\n\u003Cp\u003EThis format is the first that comes in mind when thinking about sharing data. It&#39;s the easiest to understand, and reading it is the most simple thing to code. But it&#39;s a bad idea using it with medium sized matrices, since the size can be for times or more than the original uncompressed GeoTIFF.\u003C\u002Fp\u003E\\n\u003Ch3 id=\\\"html-example-2\\\"\u003EHTML example\u003C\u002Fh3\u003E\\n\u003Cp\u003E\u003Cpre\u003E\u003Ccode\u003E\\n\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E!\u003C\u002Fspan\u003E\u003Cspan class=\\\"token constant\\\"\u003EDOCTYPE\u003C\u002Fspan\u003E html\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003Ehtml\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003Ebody\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003Escript\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"token keyword\\\"\u003Evar\u003C\u002Fspan\u003E oReq \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\\\"token class-name\\\"\u003EXMLHttpRequest\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\\n\\noReq\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EaddEventListener\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"load\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token parameter\\\"\u003Edata\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E{\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"token keyword\\\"\u003Evar\u003C\u002Fspan\u003E t0 \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E performance\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Enow\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"token keyword\\\"\u003Evar\u003C\u002Fspan\u003E jsonData \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token constant\\\"\u003EJSON\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Eparse\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token keyword\\\"\u003Ethis\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003Eresponse\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"token keyword\\\"\u003Evar\u003C\u002Fspan\u003E t1 \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E performance\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Enow\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n    console\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"Decoding took \\\"\u003C\u002Fspan\u003E \u003Cspan class=\\\"token operator\\\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Et1 \u003Cspan class=\\\"token operator\\\"\u003E-\u003C\u002Fspan\u003E t0\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\\\"token operator\\\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\\\"token string\\\"\u003E\\\" milliseconds.\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"token punctuation\\\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\\noReq\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Eopen\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"GET\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token string\\\"\u003E\\\"vardah.json\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\noReq\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Esend\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\\n\\n\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E\u002F\u003C\u002Fspan\u003Escript\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\\n\\n\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fp\u003E\\n\u003Cul\u003E\\n\u003Cli\u003EJust parse the JSON file!\u003C\u002Fli\u003E\\n\u003Cli\u003EOf course, all the metadata is easy to add, so the format is very flexible\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003Cp\u003ECreating the JSON sample file using python is easy:\u003C\u002Fp\u003E\\n\u003Cp\u003E\u003Cpre\u003E\u003Ccode\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Eimport\u003C\u002Fspan\u003E gdal\\n\u003Cspan class=\\\"token keyword\\\"\u003Eimport\u003C\u002Fspan\u003E json\\nfrom base64 \u003Cspan class=\\\"token keyword\\\"\u003Eimport\u003C\u002Fspan\u003E b64encode\\n\u003Cspan class=\\\"token keyword\\\"\u003Eimport\u003C\u002Fspan\u003E struct\\n\\nd_s \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E gdal\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EOpen\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"vardah.tiff\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\ndata \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E d_s\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EGetRasterBand\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EReadAsArray\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token function\\\"\u003Eprint\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003Edtype\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\nout_data \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token function\\\"\u003Eprint\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"Size:\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E data\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003Eshape\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Efor\u003C\u002Fspan\u003E j \u003Cspan class=\\\"token keyword\\\"\u003Ein\u003C\u002Fspan\u003E \u003Cspan class=\\\"token function\\\"\u003Erange\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003Eshape\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E:\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Efor\u003C\u002Fspan\u003E i \u003Cspan class=\\\"token keyword\\\"\u003Ein\u003C\u002Fspan\u003E \u003Cspan class=\\\"token function\\\"\u003Erange\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003Eshape\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003Ea href\u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"http:\u002F\u002Fgeoexamples.com\u002Fd3-raster-tools-docs\u002F\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E\u002F\u003C\u002Fspan\u003Ea\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E:\u003C\u002Fspan\u003E\\nout_data\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Eappend\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Efloat\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003Ej\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003Ei\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\n\\njson_data \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E}\u003C\u002Fspan\u003E\\njson_data\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E'nx'\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E data\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003Eshape\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003Ea href\u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"http:\u002F\u002Fgeoexamples.com\u002Fd3-raster-tools-docs\u002F\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E\u002F\u003C\u002Fspan\u003Ea\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\\njson_data\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E'ny'\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E data\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003Eshape\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\\njson_data\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E'data'\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E out_data\\n\\nfp \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token function\\\"\u003Eopen\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"vardah.json\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token string\\\"\u003E\\\"w\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\nfp\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Ewrite\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Ejson\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Edumps\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Ejson_data\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\nfp\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Eclose\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\n\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fp\u003E\\n\u003Cul\u003E\\n\u003Cli\u003ETo make consistent data, put all the numbers in a list, but a matrix could be created the same way, and could be more convenient in certain cases\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003Ch2 id=\\\"json-with-encoded-data\\\"\u003EJSON with encoded data\u003C\u002Fh2\u003E\\n\u003Cp\u003EPlain JSON data is expensive in terms of space. What if we encode the data in \u003Ca href=\\\"https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FBase64\\\"\u003EBase64\u003C\u002Fa\u003E? The data will be much smaller and the JSON format can store all the metadata we want with the same flexibility.\u003C\u002Fp\u003E\\n\u003Cp\u003ELet&#39;s look first at how can we create the sample file:\u003C\u002Fp\u003E\\n\u003Cp\u003E\u003Cpre\u003E\u003Ccode\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Eimport\u003C\u002Fspan\u003E gdal\\n\u003Cspan class=\\\"token keyword\\\"\u003Eimport\u003C\u002Fspan\u003E json\\nfrom base64 \u003Cspan class=\\\"token keyword\\\"\u003Eimport\u003C\u002Fspan\u003E b64encode\\n\u003Cspan class=\\\"token keyword\\\"\u003Eimport\u003C\u002Fspan\u003E struct\\n\\nd_s \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E gdal\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EOpen\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"vardah.tiff\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\ndata \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E d_s\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EGetRasterBand\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EReadAsArray\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token function\\\"\u003Eprint\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003Edtype\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\nout_data \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token function\\\"\u003Eprint\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"Size:\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E data\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003Eshape\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Efor\u003C\u002Fspan\u003E j \u003Cspan class=\\\"token keyword\\\"\u003Ein\u003C\u002Fspan\u003E \u003Cspan class=\\\"token function\\\"\u003Erange\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003Eshape\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E:\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Efor\u003C\u002Fspan\u003E i \u003Cspan class=\\\"token keyword\\\"\u003Ein\u003C\u002Fspan\u003E \u003Cspan class=\\\"token function\\\"\u003Erange\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003Eshape\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003Ea href\u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"http:\u002F\u002Fgeoexamples.com\u002Fd3-raster-tools-docs\u002F\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E\u002F\u003C\u002Fspan\u003Ea\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E:\u003C\u002Fspan\u003E\\nout_data\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Eappend\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Efloat\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003Ej\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003Ei\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\n\\njson_data \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E}\u003C\u002Fspan\u003E\\njson_data\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E'nx'\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E data\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003Eshape\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003Ea href\u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"http:\u002F\u002Fgeoexamples.com\u002Fd3-raster-tools-docs\u002F\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E\u002F\u003C\u002Fspan\u003Ea\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\\njson_data\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E'ny'\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E data\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003Eshape\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\\n\\nb64 \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token function\\\"\u003Eb64encode\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Estruct\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Epack\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Estr\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Elen\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Eout_data\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E+\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E'f'\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token operator\\\"\u003E*\u003C\u002Fspan\u003Eout_data\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Edecode\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"utf-8\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\n\\njson_data\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E'data'\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E b64\\nfp \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token function\\\"\u003Eopen\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"vardahb64.json\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token string\\\"\u003E\\\"w\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\nfp\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Ewrite\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Ejson\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Edumps\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Ejson_data\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\nfp\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Eclose\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fp\u003E\\n\u003Cul\u003E\\n\u003Cli\u003EJust encode the list after packing it as a binary string\u003Cul\u003E\\n\u003Cli\u003EI have packed the elements using a \u003Cem\u003Ef\u003C\u002Fem\u003E, so as float32 values. If this is changed, remember to change the decoding part! Some variables such as classifications can be stored as bytes, which is much more efficient\u003C\u002Fli\u003E\\n\u003Cli\u003EThe \u003Cem\u003Eb64encode\u003C\u002Fem\u003E function returns in bytes, so it has to be encoded to utf-8 to serialize it into a JSON\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003Ch3 id=\\\"html-example-3\\\"\u003EHTML example\u003C\u002Fh3\u003E\\n\u003Cp\u003E\u003Cpre\u003E\u003Ccode\u003E\\n\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E!\u003C\u002Fspan\u003E\u003Cspan class=\\\"token constant\\\"\u003EDOCTYPE\u003C\u002Fspan\u003E html\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003Ehtml\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003Ebody\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003Escript\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"token keyword\\\"\u003Evar\u003C\u002Fspan\u003E oReq \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\\\"token class-name\\\"\u003EXMLHttpRequest\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\\n\\noReq\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EaddEventListener\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"load\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token parameter\\\"\u003Edata\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E{\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"token keyword\\\"\u003Evar\u003C\u002Fspan\u003E t0 \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E performance\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Enow\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"token keyword\\\"\u003Evar\u003C\u002Fspan\u003E jsonData \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token constant\\\"\u003EJSON\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Eparse\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token keyword\\\"\u003Ethis\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003Eresponse\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"token keyword\\\"\u003Evar\u003C\u002Fspan\u003E data \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token function\\\"\u003Eatob\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003EjsonData\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E'data'\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"token keyword\\\"\u003Evar\u003C\u002Fspan\u003E b \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\\\"token class-name\\\"\u003EUint8Array\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\\n            data\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Esplit\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Emap\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token keyword\\\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token parameter\\\"\u003Ed\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\\\"token keyword\\\"\u003Ereturn\u003C\u002Fspan\u003E String\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EcharCodeAt\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Ed\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\n        \u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"token keyword\\\"\u003Evar\u003C\u002Fspan\u003E float32Data \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\\\"token class-name\\\"\u003EFloat32Array\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Eb\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003Ebuffer\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"token keyword\\\"\u003Evar\u003C\u002Fspan\u003E t1 \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E performance\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Enow\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n    console\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"Decoding took \\\"\u003C\u002Fspan\u003E \u003Cspan class=\\\"token operator\\\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Et1 \u003Cspan class=\\\"token operator\\\"\u003E-\u003C\u002Fspan\u003E t0\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\\\"token operator\\\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\\\"token string\\\"\u003E\\\" milliseconds.\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"token punctuation\\\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\\noReq\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Eopen\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"GET\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token string\\\"\u003E\\\"vardahb64.json\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\noReq\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Esend\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E\u002F\u003C\u002Fspan\u003Escript\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\\n\\n\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fp\u003E\\n\u003Cp\u003EReading this data is quite efficient, but not as easy as plain JSON. The steps are:\u003C\u002Fp\u003E\\n\u003Cul\u003E\\n\u003Cli\u003EParse the JSON data with the \u003Cem\u003EJSON.parse\u003C\u002Fem\u003E function\u003C\u002Fli\u003E\\n\u003Cli\u003EConvert the encoded field to a binary string using the \u003Cem\u003Eatob\u003C\u002Fem\u003E function. This decodes the \u003Cem\u003Ebase64 string\u003C\u002Fem\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003ERetrieve all the bytes\u003Cul\u003E\\n\u003Cli\u003EBy splitting all the chars in the string, map all the characters to the UTF-16 codes using \u003Cem\u003EString.charCodeAt\u003C\u002Fem\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003EPut all the values to a \u003Ca href=\\\"https:\u002F\u002Fdeveloper.mozilla.org\u002Fen-US\u002Fdocs\u002FWeb\u002FJavaScript\u002FTyped_arrays\\\"\u003EJavaScript typed array\u003C\u002Fa\u003E, so we can convert them later\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003C\u002Fli\u003E\\n\u003Cli\u003ESince the values were stored as float32, we create a \u003Cem\u003Ebuffer\u003C\u002Fem\u003E from the unigned int8 array and convert the types. That&#39;s all\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003Ch2 id=\\\"binary-data\\\"\u003EBinary data\u003C\u002Fh2\u003E\\n\u003Cp\u003EUsing binary data directly can be a bit more difficult, but the size is compact, the format is very flexible and the performance is very good. Also, it doesn&#39;t require any external library, which is very convenient in many cases. And since you control all the format, the original data can be obfuscated easily.\u003C\u002Fp\u003E\\n\u003Cp\u003EIf we want to store metadata, different data types may be involved, making the scripts more complicated, but it&#39;s efficient and not so difficult to do.\u003C\u002Fp\u003E\\n\u003Cp\u003ECreating the file is easy:\u003C\u002Fp\u003E\\n\u003Cp\u003E\u003Cpre\u003E\u003Ccode\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Eimport\u003C\u002Fspan\u003E gdal\\n\u003Cspan class=\\\"token keyword\\\"\u003Eimport\u003C\u002Fspan\u003E struct\\n\\nd_s \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E gdal\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EOpen\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"vardah.tiff\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\ndata \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E d_s\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EGetRasterBand\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EReadAsArray\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token function\\\"\u003Eprint\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003Edtype\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\nout_data \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"token keyword\\\"\u003Efor\u003C\u002Fspan\u003E j \u003Cspan class=\\\"token keyword\\\"\u003Ein\u003C\u002Fspan\u003E \u003Cspan class=\\\"token function\\\"\u003Erange\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003Eshape\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E:\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Efor\u003C\u002Fspan\u003E i \u003Cspan class=\\\"token keyword\\\"\u003Ein\u003C\u002Fspan\u003E \u003Cspan class=\\\"token function\\\"\u003Erange\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003Eshape\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003Ea href\u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"http:\u002F\u002Fgeoexamples.com\u002Fd3-raster-tools-docs\u002F\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E\u002F\u003C\u002Fspan\u003Ea\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E:\u003C\u002Fspan\u003E\\nout_data\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Eappend\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Efloat\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003Ej\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003Ei\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\n\\nfp \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token function\\\"\u003Eopen\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"vardah.bin\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token string\\\"\u003E\\\"wb\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\nfp\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Ewrite\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Estruct\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Epack\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Estr\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Elen\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Eout_data\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E+\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E'f'\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token operator\\\"\u003E*\u003C\u002Fspan\u003Eout_data\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\nfp\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Eclose\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fp\u003E\\n\u003Cul\u003E\\n\u003Cli\u003EJust use the \u003Cem\u003Epack\u003C\u002Fem\u003E function to store the data\u003Cul\u003E\\n\u003Cli\u003ENote that the data is packed with the \u003Cem\u003Ef\u003C\u002Fem\u003E letter, this is as float32 elements\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003Ch3 id=\\\"html-example-4\\\"\u003EHTML example\u003C\u002Fh3\u003E\\n\u003Cp\u003EReading the binary data is really easy using \u003Ca href=\\\"https:\u002F\u002Fdeveloper.mozilla.org\u002Fen-US\u002Fdocs\u002FWeb\u002FJavaScript\u002FTyped_arrays\\\"\u003EJavascript typed arrays\u003C\u002Fa\u003E:\\n\u003Cpre\u003E\u003Ccode\u003E\\n\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E!\u003C\u002Fspan\u003E\u003Cspan class=\\\"token constant\\\"\u003EDOCTYPE\u003C\u002Fspan\u003E html\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003Ehtml\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003Ebody\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003Escript\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Evar\u003C\u002Fspan\u003E oReq \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\\\"token class-name\\\"\u003EXMLHttpRequest\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\\n\\noReq\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EaddEventListener\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"load\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token parameter\\\"\u003Edata\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E{\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Evar\u003C\u002Fspan\u003E t0 \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E performance\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Enow\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003Ebr\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Evar\u003C\u002Fspan\u003E floatArray\u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\\\"token class-name\\\"\u003EFloat32Array\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token keyword\\\"\u003Ethis\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003Eresponse\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Evar\u003C\u002Fspan\u003E t1 \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E performance\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Enow\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\nconsole\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"Decoding took \\\"\u003C\u002Fspan\u003E \u003Cspan class=\\\"token operator\\\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Et1 \u003Cspan class=\\\"token operator\\\"\u003E-\u003C\u002Fspan\u003E t0\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\\\"token operator\\\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\\\"token string\\\"\u003E\\\" milliseconds.\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token punctuation\\\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\\noReq\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Eopen\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"GET\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token string\\\"\u003E\\\"vardah.bin\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\noReq\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003EresponseType \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token string\\\"\u003E'arraybuffer'\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\noReq\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Esend\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E\u002F\u003C\u002Fspan\u003Escript\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fp\u003E\\n\u003Cul\u003E\\n\u003Cli\u003ENote that the request must be set with an \u003Cem\u003Earraybuffer\u003C\u002Fem\u003E \u003Cem\u003Eresponsetype\u003C\u002Fem\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003EJust read the responsa into a new Float32Array. All the values will be there\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003Ch2 id=\\\"lzw-compressed-binary-data\\\"\u003ELZW compressed binary data\u003C\u002Fh2\u003E\\n\u003Cp\u003EOf course, as in the \u003Ca href=\\\"#geotiff\\\"\u003EGeoTIFF\u003C\u002Fa\u003E case, all the data can be compressed. Using complex compression algorithms makes you lose the advantage of coding everything without an external library, but the \u003Ca href=\\\"https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FLempel%E2%80%93Ziv%E2%80%93Welch\\\"\u003ELZW algorithm\u003C\u002Fa\u003E is so simple that it can be added with a few lines of code.\u003C\u002Fp\u003E\\n\u003Cp\u003EI will use the code sample from the \u003Ca href=\\\"https:\u002F\u002Frosettacode.org\u002Fwiki\u002FLZW_compression\\\"\u003Erossetacode.org site\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\\n\u003Ch3 id=\\\"file-creation-using-python\\\"\u003EFile creation using Python\u003C\u002Fh3\u003E\\n\u003Cp\u003E\u003Cpre\u003E\u003Ccode\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Eimport\u003C\u002Fspan\u003E gdal\\n\u003Cspan class=\\\"token keyword\\\"\u003Eimport\u003C\u002Fspan\u003E struct\\nfrom base64 \u003Cspan class=\\\"token keyword\\\"\u003Eimport\u003C\u002Fspan\u003E b64encode\\n\\n\u003Cspan class=\\\"token string\\\"\u003E''\u003C\u002Fspan\u003E'\\nCompression algorithm\\n\u003Cspan class=\\\"token string\\\"\u003E''\u003C\u002Fspan\u003E'\\ndef \u003Cspan class=\\\"token function\\\"\u003Ecompress\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Euncompressed\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E:\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token string\\\"\u003E\\\"\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"Compress a string to a list of output symbols.\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"\\\"\u003C\u002Fspan\u003E\\n# Build the dictionary\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\\ndict_size \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E256\u003C\u002Fspan\u003E\\ndictionary \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token function\\\"\u003Edict\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Echr\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Ei\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E i\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Efor\u003C\u002Fspan\u003E i \u003Cspan class=\\\"token keyword\\\"\u003Ein\u003C\u002Fspan\u003E \u003Cspan class=\\\"token function\\\"\u003Exrange\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Edict_size\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\n\\nw \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token string\\\"\u003E\\\"\\\"\u003C\u002Fspan\u003E\\nresult \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Efor\u003C\u002Fspan\u003E c \u003Cspan class=\\\"token keyword\\\"\u003Ein\u003C\u002Fspan\u003E uncompressed\u003Cspan class=\\\"token operator\\\"\u003E:\u003C\u002Fspan\u003E\\n    wc \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E w \u003Cspan class=\\\"token operator\\\"\u003E+\u003C\u002Fspan\u003E c\\n    \u003Cspan class=\\\"token keyword\\\"\u003Eif\u003C\u002Fspan\u003E wc \u003Cspan class=\\\"token keyword\\\"\u003Ein\u003C\u002Fspan\u003E dictionary\u003Cspan class=\\\"token operator\\\"\u003E:\u003C\u002Fspan\u003E\\n        w \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E wc\\n    \u003Cspan class=\\\"token keyword\\\"\u003Eelse\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E:\u003C\u002Fspan\u003E\\n        result\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Eappend\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Edictionary\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003Ew\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\n        # Add wc to the dictionary\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\\n        dictionary\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003Ewc\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E dict_size\\n        dict_size \u003Cspan class=\\\"token operator\\\"\u003E+=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E1\u003C\u002Fspan\u003E\\n        w \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E c\\n\\n# Output the code \u003Cspan class=\\\"token keyword\\\"\u003Efor\u003C\u002Fspan\u003E w\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Eif\u003C\u002Fspan\u003E w\u003Cspan class=\\\"token operator\\\"\u003E:\u003C\u002Fspan\u003E\\n    result\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Eappend\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Edictionary\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003Ew\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Ereturn\u003C\u002Fspan\u003E result\\nd_s \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E gdal\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EOpen\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"vardah.tiff\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\ndata \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E d_s\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EGetRasterBand\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EReadAsArray\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\n\\nout_data \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Efor\u003C\u002Fspan\u003E j \u003Cspan class=\\\"token keyword\\\"\u003Ein\u003C\u002Fspan\u003E \u003Cspan class=\\\"token function\\\"\u003Erange\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003Eshape\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E:\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Efor\u003C\u002Fspan\u003E i \u003Cspan class=\\\"token keyword\\\"\u003Ein\u003C\u002Fspan\u003E \u003Cspan class=\\\"token function\\\"\u003Erange\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003Eshape\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003Ea href\u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"http:\u002F\u002Fgeoexamples.com\u002Fd3-raster-tools-docs\u002F\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E\u002F\u003C\u002Fspan\u003Ea\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E:\u003C\u002Fspan\u003E\\nout_data\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Eappend\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Efloat\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003Ej\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003Ei\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\nout_data_bytes \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E struct\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Epack\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Estr\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Elen\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Eout_data\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E+\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E'f'\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token operator\\\"\u003E*\u003C\u002Fspan\u003Eout_data\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\ncompressed \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token function\\\"\u003Ecompress\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Eout_data_bytes\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\n\\nfp \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token function\\\"\u003Eopen\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"vardah.lzw.bin\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token string\\\"\u003E\\\"wb\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\nfp\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Ewrite\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Estruct\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Epack\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Estr\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Elen\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Ecompressed\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E+\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E'H'\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token operator\\\"\u003E*\u003C\u002Fspan\u003Ecompressed\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\nfp\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Eclose\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fp\u003E\\n\u003Cul\u003E\\n\u003Cli\u003EThe compression function is copied directly from the \u003Ca href=\\\"https:\u002F\u002Frosettacode.org\u002Fwiki\u002FLZW_compression\\\"\u003Erossetacode.org site\u003C\u002Fa\u003E\u003Cul\u003E\\n\u003Cli\u003EIt&#39;s supposed to work with a string, so we will convert out floats list into a binary bytes string\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Cem\u003Epack\u003C\u002Fem\u003E will convert the data list into a string with the binary data. The compressed data will be byte by byte\u003C\u002Fli\u003E\\n\u003Cli\u003EThe data is compressed with the function\u003C\u002Fli\u003E\\n\u003Cli\u003EThe data is written as a string of unsigned shorts. This is because the compressed data is a list with values from 0 to 65535, so the \u003Cem\u003Eunsigned short\u003C\u002Fem\u003E will be the most efficient way to store its values\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003Cp\u003EThe size is reduced by 50% in our example. If a classification is used instead of float values, the compression will be much more efficient.\u003C\u002Fp\u003E\\n\u003Cp\u003EIf using python3, the \u003Cem\u003Ecompress\u003C\u002Fem\u003E function would be:\\n\u003Cpre\u003E\u003Ccode\u003E\\ndef \u003Cspan class=\\\"token function\\\"\u003Ecompress\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Euncompressed\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E:\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token string\\\"\u003E\\\"\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"Compress a string to a list of output symbols.\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"\\\"\u003C\u002Fspan\u003E\\n# Build the dictionary\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\\ndict_size \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E256\u003C\u002Fspan\u003E\\ndictionary \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Ebytes\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003Ei\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E:\u003C\u002Fspan\u003E i \u003Cspan class=\\\"token keyword\\\"\u003Efor\u003C\u002Fspan\u003E i \u003Cspan class=\\\"token keyword\\\"\u003Ein\u003C\u002Fspan\u003E \u003Cspan class=\\\"token function\\\"\u003Erange\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Edict_size\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E}\u003C\u002Fspan\u003E\\nw \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E b\u003Cspan class=\\\"token string\\\"\u003E\\\"\\\"\u003C\u002Fspan\u003E\\nresult \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Efor\u003C\u002Fspan\u003E c \u003Cspan class=\\\"token keyword\\\"\u003Ein\u003C\u002Fspan\u003E uncompressed\u003Cspan class=\\\"token operator\\\"\u003E:\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"token function\\\"\u003E#print\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Etype\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Ew\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token function\\\"\u003Etype\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Ebytes\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003Ec\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E c\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token function\\\"\u003Ebytes\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003Ec\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\n    wc \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E w \u003Cspan class=\\\"token operator\\\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\\\"token function\\\"\u003Ebytes\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003Ec\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"token keyword\\\"\u003Eif\u003C\u002Fspan\u003E wc \u003Cspan class=\\\"token keyword\\\"\u003Ein\u003C\u002Fspan\u003E dictionary\u003Cspan class=\\\"token operator\\\"\u003E:\u003C\u002Fspan\u003E\\n        w \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E wc\\n    \u003Cspan class=\\\"token keyword\\\"\u003Eelse\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E:\u003C\u002Fspan\u003E\\n        result\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Eappend\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Edictionary\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003Ew\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\n        # Add wc to the dictionary\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\\n        dictionary\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003Ewc\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E dict_size\\n        dict_size \u003Cspan class=\\\"token operator\\\"\u003E+=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E1\u003C\u002Fspan\u003E\\n        w \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token function\\\"\u003Ebytes\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003Ec\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\n\\n# Output the code \u003Cspan class=\\\"token keyword\\\"\u003Efor\u003C\u002Fspan\u003E w\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Eif\u003C\u002Fspan\u003E w\u003Cspan class=\\\"token operator\\\"\u003E:\u003C\u002Fspan\u003E\\n    result\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Eappend\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Edictionary\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003Ew\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Ereturn\u003C\u002Fspan\u003E result\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fp\u003E\\n\u003Cul\u003E\\n\u003Cli\u003E\u003Cem\u003Estr\u003C\u002Fem\u003E vars in python 2 become \u003Cem\u003Ebytes\u003C\u002Fem\u003E in python3, so everything has to be adapted\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Cem\u003Exrange\u003C\u002Fem\u003E has to be changed to \u003Cem\u003Erange\u003C\u002Fem\u003E\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003Ch3 id=\\\"html-example-5\\\"\u003EHTML example\u003C\u002Fh3\u003E\\n\u003Cp\u003E\u003Cpre\u003E\u003Ccode\u003E\\n\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E!\u003C\u002Fspan\u003E\u003Cspan class=\\\"token constant\\\"\u003EDOCTYPE\u003C\u002Fspan\u003E html\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003Ehtml\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003Ebody\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003Escript\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Evar\u003C\u002Fspan\u003E oReq \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\\\"token class-name\\\"\u003EXMLHttpRequest\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\\n\\noReq\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EaddEventListener\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"load\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token parameter\\\"\u003Edata\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E{\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Evar\u003C\u002Fspan\u003E t0 \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E performance\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Enow\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003Ebr\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Evar\u003C\u002Fspan\u003E compressedArray \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\\\"token class-name\\\"\u003EUint16Array\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token keyword\\\"\u003Ethis\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003Eresponse\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\nconsole\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Einfo\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003EcompressedArray\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003Elength\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Evar\u003C\u002Fspan\u003E uncompressed \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token function\\\"\u003Euncompress\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003EcompressedArray\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Evar\u003C\u002Fspan\u003E t1 \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E performance\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Enow\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\nconsole\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"Decoding took \\\"\u003C\u002Fspan\u003E \u003Cspan class=\\\"token operator\\\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Et1 \u003Cspan class=\\\"token operator\\\"\u003E-\u003C\u002Fspan\u003E t0\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\\\"token operator\\\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\\\"token string\\\"\u003E\\\" milliseconds.\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token punctuation\\\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\\noReq\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Eopen\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"GET\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\\\"token string\\\"\u003E\\\"vardah.lzw.bin\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\noReq\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003EresponseType \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token string\\\"\u003E'arraybuffer'\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\noReq\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Esend\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"token comment\\\"\u003E\u002F\u002F&lt;a href=\\\"https:\u002F\u002Frosettacode.org\u002Fwiki\u002FLZW_compression#JavaScript\\\"\u003Ehttps:\u002F\u002Frosettacode.org\u002Fwiki\u002FLZW_compression#JavaScript&lt;\u002Fa\u003E\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\\\"token function\\\"\u003Euncompress\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token parameter\\\"\u003Ecompressed\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E{\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Evar\u003C\u002Fspan\u003E i\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E\\ndictionary \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E\\nw\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E\\nresult\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E\\nfloatResult \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E\\nk\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E\\nentry \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token string\\\"\u003E\\\"\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E,\u003C\u002Fspan\u003E\\ndictSize \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E256\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token keyword\\\"\u003Efor\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Ei \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E i \u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E256\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E i \u003Cspan class=\\\"token operator\\\"\u003E+=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E{\u003C\u002Fspan\u003E\\ndictionary\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003Ei\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E String\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EfromCharCode\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Ei\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token punctuation\\\"\u003E}\u003C\u002Fspan\u003E\\n    w \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E String\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EfromCharCode\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Ecompressed\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n    result \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E w\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"token keyword\\\"\u003Efor\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Ei \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E i \u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003E compressed\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003Elength\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E i \u003Cspan class=\\\"token operator\\\"\u003E+=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token number\\\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E{\u003C\u002Fspan\u003E\\n        k \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E compressed\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003Ei\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n        \u003Cspan class=\\\"token keyword\\\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Edictionary\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003Ek\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E{\u003C\u002Fspan\u003E\\n            entry \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E dictionary\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003Ek\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n        \u003Cspan class=\\\"token punctuation\\\"\u003E}\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Eelse\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E{\u003C\u002Fspan\u003E\\n            \u003Cspan class=\\\"token keyword\\\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Ek \u003Cspan class=\\\"token operator\\\"\u003E===\u003C\u002Fspan\u003E dictSize\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E{\u003C\u002Fspan\u003E\\n                entry \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E w \u003Cspan class=\\\"token operator\\\"\u003E+\u003C\u002Fspan\u003E w\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EcharAt\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n            \u003Cspan class=\\\"token punctuation\\\"\u003E}\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Eelse\u003C\u002Fspan\u003E \u003Cspan class=\\\"token punctuation\\\"\u003E{\u003C\u002Fspan\u003E\\n                \u003Cspan class=\\\"token keyword\\\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Enull\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n            \u003Cspan class=\\\"token punctuation\\\"\u003E}\u003C\u002Fspan\u003E\\n        \u003Cspan class=\\\"token punctuation\\\"\u003E}\u003C\u002Fspan\u003E\\n         result \u003Cspan class=\\\"token operator\\\"\u003E+=\u003C\u002Fspan\u003E entry\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\\n        \u003Cspan class=\\\"token comment\\\"\u003E\u002F\u002F Add w+entry[0] to the dictionary.\u003C\u002Fspan\u003E\\n        dictionary\u003Cspan class=\\\"token punctuation\\\"\u003E[\u003C\u002Fspan\u003EdictSize\u003Cspan class=\\\"token operator\\\"\u003E++\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E w \u003Cspan class=\\\"token operator\\\"\u003E+\u003C\u002Fspan\u003E entry\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EcharAt\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token number\\\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\\n        w \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E entry\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"token punctuation\\\"\u003E}\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"token comment\\\"\u003E\u002F\u002FConvert from chars to float32 array\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"token keyword\\\"\u003Evar\u003C\u002Fspan\u003E b \u003Cspan class=\\\"token operator\\\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\\\"token class-name\\\"\u003EUint8Array\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\\n        result\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Esplit\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token string\\\"\u003E\\\"\\\"\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003Emap\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token keyword\\\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\\\"token parameter\\\"\u003Ed\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\\\"token keyword\\\"\u003Ereturn\u003C\u002Fspan\u003E String\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\\\"token function\\\"\u003EcharCodeAt\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Ed\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"token keyword\\\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\\\"token keyword\\\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\\\"token class-name\\\"\u003EFloat32Array\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E(\u003C\u002Fspan\u003Eb\u003Cspan class=\\\"token punctuation\\\"\u003E.\u003C\u002Fspan\u003Ebuffer\u003Cspan class=\\\"token punctuation\\\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\\\"token punctuation\\\"\u003E;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token punctuation\\\"\u003E}\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"token operator\\\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\\\"token operator\\\"\u003E\u002F\u003C\u002Fspan\u003Escript\u003Cspan class=\\\"token operator\\\"\u003E\u003E\u003C\u002Fspan\u003E\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fp\u003E\\n\u003Cul\u003E\\n\u003Cli\u003EAs in the other cases, just cll the \u003Cem\u003Euncompress\u003C\u002Fem\u003E function and the float array data will be in the variable\u003C\u002Fli\u003E\\n\u003Cli\u003EThe \u003Cem\u003Euncompress\u003C\u002Fem\u003E function it the same of the one at the \u003Ca href=\\\"https:\u002F\u002Frosettacode.org\u002Fwiki\u002FLZW_compression\\\"\u003Erossetacode.org site\u003C\u002Fa\u003E, but modified to convert the bytes string to a \u003Ca href=\\\"https:\u002F\u002Fdeveloper.mozilla.org\u002Fen-US\u002Fdocs\u002FWeb\u002FJavaScript\u002FTyped_arrays\\\"\u003EFloat32Array\u003C\u002Fa\u003E\u003Cul\u003E\\n\u003Cli\u003EBy splitting all the chars in the string, map all the characters to the \u003Cem\u003EUTF-16 codes\u003C\u002Fem\u003E using \u003Cem\u003EString.charCodeAt\u003C\u002Fem\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003EPut all the values to a \u003Cem\u003EUint8Array\u003C\u002Fem\u003E JavaScript typed array, so we can convert them later\u003C\u002Fli\u003E\\n\u003Cli\u003EThe unsigned short array is then converted to a \u003Cem\u003EFloat32Array\u003C\u002Fem\u003E using buffers\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003Cp\u003ENot so difficult! If some metadata has to be added, things can be a bit more complicated, specially if different types are involved\u003C\u002Fp\u003E\\n\u003Ch2 id=\\\"performance-comparison\\\"\u003EPerformance comparison\u003C\u002Fh2\u003E\\n\u003Cp\u003EI run all the options so it&#39;s easy to compare the final file size and the time it takes to parse\u003C\u002Fp\u003E\\n\u003Ctable\u003E\\n\u003Cthead\u003E\\n\u003Ctr\u003E\\n\u003Cth\u003EFormat\u003C\u002Fth\u003E\\n\u003Cth align=\\\"center\\\"\u003ESize\u003C\u002Fth\u003E\\n\u003Cth align=\\\"right\\\"\u003EParsing time\u003C\u002Fth\u003E\\n\u003C\u002Ftr\u003E\\n\u003C\u002Fthead\u003E\\n\u003Ctbody\u003E\u003Ctr\u003E\\n\u003Ctd\u003EUncompressed GeoTIFF\u003C\u002Ftd\u003E\\n\u003Ctd align=\\\"center\\\"\u003E102 kB\u003C\u002Ftd\u003E\\n\u003Ctd align=\\\"right\\\"\u003E20 ms\u003C\u002Ftd\u003E\\n\u003C\u002Ftr\u003E\\n\u003Ctr\u003E\\n\u003Ctd\u003EPackbits GeoTIFF\u003C\u002Ftd\u003E\\n\u003Ctd align=\\\"center\\\"\u003E103 kB\u003C\u002Ftd\u003E\\n\u003Ctd align=\\\"right\\\"\u003E80 ms\u003C\u002Ftd\u003E\\n\u003C\u002Ftr\u003E\\n\u003Ctr\u003E\\n\u003Ctd\u003ELZW GeoTIFF\u003C\u002Ftd\u003E\\n\u003Ctd align=\\\"center\\\"\u003E53 kB\u003C\u002Ftd\u003E\\n\u003Ctd align=\\\"right\\\"\u003E54 ms\u003C\u002Ftd\u003E\\n\u003C\u002Ftr\u003E\\n\u003Ctr\u003E\\n\u003Ctd\u003EDeflate GeoTIFF\u003C\u002Ftd\u003E\\n\u003Ctd align=\\\"center\\\"\u003E40 kB\u003C\u002Ftd\u003E\\n\u003Ctd align=\\\"right\\\"\u003E59 ms\u003C\u002Ftd\u003E\\n\u003C\u002Ftr\u003E\\n\u003Ctr\u003E\\n\u003Ctd\u003EJSON\u003C\u002Ftd\u003E\\n\u003Ctd align=\\\"center\\\"\u003E490 kB\u003C\u002Ftd\u003E\\n\u003Ctd align=\\\"right\\\"\u003E9 ms\u003C\u002Ftd\u003E\\n\u003C\u002Ftr\u003E\\n\u003Ctr\u003E\\n\u003Ctd\u003EBase64 JSON\u003C\u002Ftd\u003E\\n\u003Ctd align=\\\"center\\\"\u003E135 kB\u003C\u002Ftd\u003E\\n\u003Ctd align=\\\"right\\\"\u003E12 ms\u003C\u002Ftd\u003E\\n\u003C\u002Ftr\u003E\\n\u003Ctr\u003E\\n\u003Ctd\u003EBinary\u003C\u002Ftd\u003E\\n\u003Ctd align=\\\"center\\\"\u003E101 kB\u003C\u002Ftd\u003E\\n\u003Ctd align=\\\"right\\\"\u003E0.15 ms\u003C\u002Ftd\u003E\\n\u003C\u002Ftr\u003E\\n\u003Ctr\u003E\\n\u003Ctd\u003ELZW binary\u003C\u002Ftd\u003E\\n\u003Ctd align=\\\"center\\\"\u003E54 kB\u003C\u002Ftd\u003E\\n\u003Ctd align=\\\"right\\\"\u003E14 ms\u003C\u002Ftd\u003E\\n\u003C\u002Ftr\u003E\\n\u003C\u002Ftbody\u003E\u003C\u002Ftable\u003E\\n\u003Cul\u003E\\n\u003Cli\u003EGeoTIFF files, specially if compressed, are the smallest ones, but with the higher parsing time. Anyway, 60ms is a very good time, so it will be the usual method\u003C\u002Fli\u003E\\n\u003Cli\u003EJSON files are the most inefficient in terms of space, and the parsing time is not as low as it could be, because there are many characters to parse\u003C\u002Fli\u003E\\n\u003Cli\u003EBinary files are really fast to parse, and the size is quite small if compressed\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003Ch2 id=\\\"what-to-do-with-all-this-binary-data\\\"\u003EWhat to do with all this binary data?\u003C\u002Fh2\u003E\\n\u003Cp\u003EWith the html canvas element and some libraries around there, many visualizations can be done with a point matrix. I made a tutorial some time ago: \u003Ca href=\\\"http:\u002F\u002Fgeoexamples.com\u002Fd3-raster-tools-docs\u002F\\\"\u003Ed3-raster-tools-docs\u003C\u002Fa\u003E\u003C\u002Fp\u003E\\n\u003Ch2 id=\\\"links\\\"\u003ELinks\u003C\u002Fh2\u003E\\n\u003Cul\u003E\\n\u003Cli\u003E\u003Ca href=\\\"http:\u002F\u002Fgeoexamples.com\u002Fd3-raster-tools-docs\u002F\\\"\u003Edrawing raster data with d3js\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"http:\u002F\u002Fbl.ocks.org\u002Frveciana\u002F420a33fd0963e2a6aad16da54725af36\\\"\u003EVardah and leaflet block\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"http:\u002F\u002Fgeoexamples.com\u002Fd3-raster-tools-docs\u002Fcode_samples\u002Fvardah.html\\\"\u003EGenerating the Vardah data file\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"http:\u002F\u002Fbl.ocks.org\u002Frveciana\u002Fraw\u002F420a33fd0963e2a6aad16da54725af36\u002Fvardah.tiff\\\"\u003EThe original geotiff file\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"https:\u002F\u002Fgithub.com\u002Fconstantinius\u002Fgeotiff.js\\\"\u003EThe geotiff.js library\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"https:\u002F\u002Fgithub.com\u002Fcheminfo-js\u002Fnetcdfjs\\\"\u003EThe netcdfjs library\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FBase64\\\"\u003EBase64 Wikipedia page\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"https:\u002F\u002Fdeveloper.mozilla.org\u002Fen-US\u002Fdocs\u002FWeb\u002FJavaScript\u002FTyped_arrays\\\"\u003EJavaScript typed arrays\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FLempel%E2%80%93Ziv%E2%80%93Welch\\\"\u003ELZW algorithm wikipedia page\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"https:\u002F\u002Frosettacode.org\u002Fwiki\u002FLZW_compression\\\"\u003ELZW implementation in many languages, including Python and JavaScript\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"http:\u002F\u002Fgeoexamples.com\u002Fd3-raster-tools-docs\u002F\\\"\u003ED3js raster tools documentation\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\",\"tags\":[\"raster\"],\"date\":\"2017-11-04T00:00:00.000Z\",\"thumbnail\":\"\u002Fimages\u002Fd3\u002Fraster-file-formats-javascript\u002Ftwitter.png\"}"}</script>
</div>
	</body>
</html>
